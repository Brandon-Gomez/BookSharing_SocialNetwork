{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport apiClient from \"../services/ApiService.js\";\nimport PdfPreview from \"@/components/pdfpreview_component.vue\";\nexport default {\n  data() {\n    return {\n      categories: [],\n      post: {\n        id: null,\n        title: \"\",\n        description: \"\",\n        user_id: null,\n        image: \"\",\n        pdf_file: \"\",\n        created_at: \"\",\n        updated_at: \"\",\n        views: 0,\n        category_id: null,\n        username: \"\"\n      },\n      topPosts: [],\n      loading: true,\n      error: null\n    };\n  },\n  async beforeMount() {\n    // verificar si el usuario esta logueado\n    const token = localStorage.getItem(\"authToken\");\n    try {\n      this.post.id = this.$route.params.postId;\n      if (this.post.id == null || this.post.id == undefined) {\n        this.error = \"No se pudo cargar la información del libro.\";\n        return;\n      }\n      const response = await apiClient.get(`/posts/${this.$route.params.postId}`);\n\n      // formatea en español 2025-05-19T16:53:10.117Z a una fecha legible\n      const date = new Date(response.data.created_at);\n      const options = {\n        year: \"numeric\",\n        month: \"long\",\n        day: \"numeric\"\n      };\n      const formattedDate = date.toLocaleDateString(\"es-ES\", options);\n      this.post = response.data;\n      this.post.created_at = formattedDate;\n      // this.loading = false;\n    } catch (err) {\n      this.$router.push(\"/\");\n    }\n    // consultar todas las categorias\n    // token\n    try {\n      const res = await apiClient.get(\"/admin/categories\", {\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem(\"authToken\")}`\n        }\n      });\n      this.categories = res.data;\n    } catch (err) {\n      this.error = \"No se pudo cargar la información de las categorias.\";\n    }\n    try {\n      const res = await apiClient.get(\"/posts/top\", {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      this.topPosts = res.data;\n    } catch (err) {\n      this.error = \"No se pudo cargar la información de los libros.\";\n    }\n  },\n  components: {\n    PdfPreview\n  }\n};","map":{"version":3,"names":["apiClient","PdfPreview","data","categories","post","id","title","description","user_id","image","pdf_file","created_at","updated_at","views","category_id","username","topPosts","loading","error","beforeMount","token","localStorage","getItem","$route","params","postId","undefined","response","get","date","Date","options","year","month","day","formattedDate","toLocaleDateString","err","$router","push","res","headers","Authorization","components"],"sources":["D:\\Downloads\\BookSharing_SocialNetwork\\fronvue\\src\\components\\post_component.vue"],"sourcesContent":["<template>\r\n    {{ post }}\r\n    <div>\r\n        <div class=\"bg-secondary py-4\">\r\n            <div class=\"container d-lg-flex justify-content-between py-2 py-lg-3\">\r\n                <div class=\"order-lg-2 mb-3 mb-lg-0 pt-lg-2\">\r\n                    <nav aria-label=\"breadcrumb\">\r\n                        <ol class=\"breadcrumb flex-lg-nowrap justify-content-center justify-content-lg-start\"\r\n                            style=\"background-color: unset\">\r\n                            <li class=\"breadcrumb-item\">\r\n                                <a class=\"text-nowrap\" href=\"/\"><i class=\"ci-home\"></i>Inicio</a>\r\n                            </li>\r\n                            <li class=\"breadcrumb-item text-nowrap active\" aria-current=\"page\">\r\n                                Ver libro\r\n                            </li>\r\n                        </ol>\r\n                    </nav>\r\n                </div>\r\n\r\n                <div class=\"order-lg-1 pe-lg-4 text-center text-lg-start align-self-center\">\r\n                    <h1 class=\"h3 mb-0\" style=\"display: flex; align-items: anchor-center\">\r\n                        {{ post.title }}\r\n\r\n                        <a class=\"btn-tag ml-2\" href=\"#\">{{  }}</a>\r\n                    </h1>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class=\"container pb-5\">\r\n            <div class=\"row pt-5 mt-md-2\">\r\n                <section class=\"col-lg-8\">\r\n                    <!-- Post meta-->\r\n                    <div class=\"d-flex flex-wrap justify-content-between align-items-center pb-4 mt-n1\">\r\n                        <div class=\"d-flex align-items-center fs-sm mb-2\">\r\n                            <a class=\"blog-entry-meta-link\" href=\"#\">\r\n                                <div class=\"blog-entry-author-ava\">\r\n                                    <img src=\"../../dist/img/blog/meta/02.jpg\" alt=\"Foto\" />\r\n                                </div>\r\n                                {{ post.username }}\r\n                            </a><span class=\"blog-entry-meta-divider\"></span><a class=\"blog-entry-meta-link\" href=\"#\">{{\r\n                                post.created_at\r\n                                }}</a>\r\n                        </div>\r\n                        <div class=\"fs-sm mb-2\">\r\n                            <a class=\"blog-entry-meta-link text-nowrap mr-3\" href=\"#comments\" data-scroll=\"\"><i\r\n                                    class=\"ci-eye\"></i>{{ post.views }}</a>\r\n                            <a class=\"blog-entry-meta-link text-nowrap mr-3\" href=\"#comments\" data-scroll=\"\"><i\r\n                                    class=\"ci-heart\"></i>{{ post.total_likes }}</a>\r\n                        </div>\r\n                    </div>\r\n                    <!-- Gallery-->\r\n                    <h2 class=\"h4\"></h2>\r\n\r\n                    <div class=\"gallery pb-2 text-center\" lg-uid=\"lg0\">\r\n                        <img width=\"300px\"\r\n                            src=\"https://tunovela.es/wp-content/uploads/Cien-anos-de-soledad-de-Gabriel-Garcia-Marquez-resumen-y-analisis.jpg\"\r\n                            alt=\"Gallery image\" />\r\n                    </div>\r\n                    <!-- Post content-->\r\n                    <p class=\"mt-2\">\r\n                        \"Cien años de soledad\" narra la historia de la familia Buendía,\r\n                        desde su fundación en el pueblo de Macondo hasta su declive y\r\n                        desaparición. A lo largo de siete generaciones, los Buendía\r\n                        experimentan amores imposibles, tragedias, guerras y una maldición\r\n                        que los condena a una profunda soledad.\r\n                    </p>\r\n\r\n                    <!-- ver pdf button -->\r\n                    <!-- <div class=\"mt-3 me-3\"><a class=\"btn-tag mb-2\" href=\"#\">Ver PDF</a></div> -->\r\n\r\n                    <!-- Post tags + sharing-->\r\n                    <div class=\"d-flex flex-wrap justify-content-between pb-4 mb-1\">\r\n                        <div class=\"mt-2 me-3\">\r\n                            <PdfPreview v-if=\"post.pdf_file\" :pdfUrl=\"post.pdf_file\" :postId=\"post.postId\" />\r\n                        </div>\r\n                        <div class=\"mt-3\">\r\n                            <span class=\"d-inline-block align-middle text-muted fs-sm me-3 mt-1 mb-2\">Compartir\r\n                                libro:</span><a class=\"btn-social bs-facebook me-2 mb-2\" href=\"#\"><i\r\n                                    class=\"ci-facebook\"></i></a><a class=\"btn-social bs-twitter me-2 mb-2\" href=\"#\"><i\r\n                                    class=\"ci-twitter\"></i></a><a class=\"btn-social bs-pinterest me-2 mb-2\" href=\"#\"><i\r\n                                    class=\"ci-pinterest\"></i></a>\r\n                        </div>\r\n                    </div>\r\n                    <!-- Post navigation-->\r\n                    <nav class=\"entry-navigation\" aria-label=\"Post navigation\">\r\n                        <a class=\"entry-navigation-link\" href=\"/posts/2\" data-bs-toggle=\"popover\"\r\n                            data-bs-placement=\"top\" data-bs-trigger=\"hover\" data-bs-html=\"true\"\r\n                            data-bs-content='<div class=\"d-flex align-items-center\"><img src=\"img/blog/navigation/01.jpg\" width=\"60\" class=\"rounded\" alt=\"Post thumb\"><div class=\"ps-3\"><h6 class=\"fs-sm fw-semibold mb-0\">How to choose perfect shoes for running</h6><span class=\"d-block fs-xs text-muted\">by Susan Mayer</span></div></div>'\r\n                            data-bs-original-title=\"\" title=\"\"><i class=\"ci-arrow-left me-2\"></i><span\r\n                                class=\"d-none d-sm-inline\">Ant libro</span></a>\r\n                        <a class=\"entry-navigation-link\" href=\"/posts/5\"><i class=\"ci-view-list me-2\"></i><span\r\n                                class=\"d-none d-sm-inline\">Ver libros</span></a><a class=\"entry-navigation-link\"\r\n                            href=\"/posts/6\" data-bs-toggle=\"popover\" data-bs-placement=\"top\" data-bs-trigger=\"hover\"\r\n                            data-bs-html=\"true\"\r\n                            data-bs-content='<div class=\"d-flex align-items-center\"><img src=\"img/blog/navigation/02.jpg\" width=\"60\" class=\"rounded\" alt=\"Post thumb\"><div class=\"ps-3\"><h6  class=\"fs-sm fw-semibold mb-0\">Factors behind smart watches popularity</h6><span class=\"d-block fs-xs text-muted\">by Logan Coleman</span></div></div>'\r\n                            data-bs-original-title=\"\" title=\"\"><span class=\"d-none d-sm-inline\">Sig libro</span><i\r\n                                class=\"ci-arrow-right ms-2\"></i></a>\r\n                    </nav>\r\n                </section>\r\n                <aside class=\"col-lg-4\">\r\n                    <!-- Sidebar-->\r\n                    <div class=\"offcanvas offcanvas-collapse offcanvas-end border-start ms-lg-auto\" id=\"blog-sidebar\"\r\n                        style=\"max-width: 22rem\">\r\n                        <div class=\"offcanvas-header align-items-center shadow-sm\">\r\n                            <h2 class=\"h5 mb-0\">Sidebar</h2>\r\n                            <button class=\"btn-close ms-auto\" type=\"button\" data-bs-dismiss=\"offcanvas\"\r\n                                aria-label=\"Close\"></button>\r\n                        </div>\r\n                        <div class=\"offcanvas-body py-grid-gutter py-lg-1 px-lg-4\" data-simplebar=\"init\"\r\n                            data-simplebar-auto-hide=\"true\">\r\n                            <div class=\"simplebar-wrapper\" style=\"margin: -4px -24px\">\r\n                                <div class=\"simplebar-height-auto-observer-wrapper\">\r\n                                    <div class=\"simplebar-height-auto-observer\"></div>\r\n                                </div>\r\n                                <div class=\"simplebar-mask\">\r\n                                    <div class=\"simplebar-offset\" style=\"right: 0px; bottom: 0px\">\r\n                                        <div class=\"simplebar-content-wrapper\" tabindex=\"0\" role=\"region\"\r\n                                            aria-label=\"scrollable content\" style=\"height: auto; overflow: hidden\">\r\n                                            <div class=\"simplebar-content\" style=\"padding: 4px 24px\">\r\n                                                <!-- Categories-->\r\n                                                <div\r\n                                                    class=\"widget widget-links mb-grid-gutter pb-grid-gutter border-bottom mx-lg-2\">\r\n                                                    <h3 class=\"widget-title\">Categorías libros</h3>\r\n                                                    <ul class=\"widget-list\">\r\n                                                        <li v-for=\"cat in categories\" :key=\"cat.id\"\r\n                                                            class=\"widget-list-item\">\r\n                                                            <RouterLink\r\n                                                                class=\"widget-list-link d-flex justify-content-between align-items-center\"\r\n                                                                :to=\"`/category/${cat.id}`\">\r\n                                                                <span>{{ cat.name }}</span>\r\n                                                                <span class=\"fs-xs text-muted ms-3\">{{\r\n                                                                    cat.post_count\r\n                                                                    }}</span>\r\n                                                            </RouterLink>\r\n                                                        </li>\r\n                                                    </ul>\r\n                                                </div>\r\n                                                <!-- Trending posts-->\r\n                                                <div class=\"widget mb-grid-gutter pb-grid-gutter mx-lg-2\">\r\n                                                    <h3 class=\"widget-title\">Libros en tendencia</h3>\r\n                                                    <div v-if=\"topPosts.length === 0\" class=\"text-muted\">No hay libros\r\n                                                        en tendencia.</div>\r\n                                                    <div v-else>\r\n                                                        <div v-for=\"post in topPosts\" :key=\"post.post_id\"\r\n                                                            class=\"d-flex align-items-center mb-3\">\r\n                                                            <a class=\"flex-shrink-0\" :href=\"`/posts/${post.post_id}`\">\r\n                                                                <img class=\"rounded\"\r\n                                                                    :src=\"post.image || 'https://tunovela.es/wp-content/uploads/Cien-anos-de-soledad-de-Gabriel-Garcia-Marquez-resumen-y-analisis.jpg'\"\r\n                                                                    width=\"64\" alt=\"Post image\" />\r\n                                                            </a>\r\n                                                            <div class=\"ps-3\">\r\n                                                                <h6 class=\"blog-entry-title fs-sm mb-0\">\r\n                                                                    <a :href=\"`/posts/${post.post_id}`\">{{ post.title\r\n                                                                        }}</a>\r\n                                                                </h6>\r\n                                                                <span class=\"fs-ms text-muted\">\r\n                                                                    por\r\n                                                                    <span class=\"blog-entry-meta-link\">{{ post.username\r\n                                                                        }}</span>\r\n                                                                </span>\r\n                                                            </div>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                                <div class=\"simplebar-placeholder\" style=\"width: auto; height: 1081px\"></div>\r\n                            </div>\r\n                            <div class=\"simplebar-track simplebar-horizontal\" style=\"visibility: hidden\">\r\n                                <div class=\"simplebar-scrollbar\" style=\"width: 0px; display: none\"></div>\r\n                            </div>\r\n                            <div class=\"simplebar-track simplebar-vertical\" style=\"visibility: hidden\">\r\n                                <div class=\"simplebar-scrollbar\" style=\"height: 0px; display: none\"></div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </aside>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n</template>\r\n<script>\r\nimport apiClient from \"../services/ApiService.js\";\r\nimport PdfPreview from \"@/components/pdfpreview_component.vue\";\r\n\r\nexport default {\r\n    data() {\r\n        return {\r\n            categories: [],\r\n            post: {\r\n                id: null,\r\n                title: \"\",\r\n                description: \"\",\r\n                user_id: null,\r\n                image: \"\",\r\n                pdf_file: \"\",\r\n                created_at: \"\",\r\n                updated_at: \"\",\r\n                views: 0,\r\n                category_id: null,\r\n                username: \"\",\r\n            },\r\n            topPosts: [],\r\n            loading: true,\r\n            error: null,\r\n        };\r\n    },\r\n    async beforeMount() {\r\n\r\n\r\n        // verificar si el usuario esta logueado\r\n        const token = localStorage.getItem(\"authToken\");\r\n\r\n        try {\r\n            this.post.id = this.$route.params.postId;\r\n            if (this.post.id == null || this.post.id == undefined) {\r\n                this.error = \"No se pudo cargar la información del libro.\";\r\n                return;\r\n            }\r\n\r\n            const response = await apiClient.get(\r\n                `/posts/${this.$route.params.postId}`\r\n            );\r\n\r\n            // formatea en español 2025-05-19T16:53:10.117Z a una fecha legible\r\n            const date = new Date(response.data.created_at);\r\n            const options = { year: \"numeric\", month: \"long\", day: \"numeric\" };\r\n            const formattedDate = date.toLocaleDateString(\"es-ES\", options);\r\n            this.post = response.data;\r\n            this.post.created_at = formattedDate;\r\n            // this.loading = false;\r\n        } catch (err) {\r\n            this.$router.push(\"/\");\r\n\r\n        }\r\n        // consultar todas las categorias\r\n        // token\r\n        try {\r\n            const res = await apiClient.get(\"/admin/categories\", {\r\n                headers: {\r\n                    Authorization: `Bearer ${localStorage.getItem(\"authToken\")}`,\r\n                },\r\n            });\r\n            this.categories = res.data;\r\n        } catch (err) {\r\n            this.error = \"No se pudo cargar la información de las categorias.\";\r\n        }\r\n\r\n        try {\r\n            const res = await apiClient.get(\"/posts/top\",\r\n                {\r\n                    headers: {\r\n                        Authorization: `Bearer ${token}`,\r\n                    },\r\n                }\r\n\r\n            );\r\n            this.topPosts = res.data;\r\n\r\n        } catch (err) {\r\n            this.error = \"No se pudo cargar la información de los libros.\";\r\n        }\r\n\r\n\r\n    },\r\n    components: { PdfPreview },\r\n};\r\n</script>\r\n"],"mappings":";AAyLA,OAAOA,SAAQ,MAAO,2BAA2B;AACjD,OAAOC,UAAS,MAAO,uCAAuC;AAE9D,eAAe;EACXC,IAAIA,CAAA,EAAG;IACH,OAAO;MACHC,UAAU,EAAE,EAAE;MACdC,IAAI,EAAE;QACFC,EAAE,EAAE,IAAI;QACRC,KAAK,EAAE,EAAE;QACTC,WAAW,EAAE,EAAE;QACfC,OAAO,EAAE,IAAI;QACbC,KAAK,EAAE,EAAE;QACTC,QAAQ,EAAE,EAAE;QACZC,UAAU,EAAE,EAAE;QACdC,UAAU,EAAE,EAAE;QACdC,KAAK,EAAE,CAAC;QACRC,WAAW,EAAE,IAAI;QACjBC,QAAQ,EAAE;MACd,CAAC;MACDC,QAAQ,EAAE,EAAE;MACZC,OAAO,EAAE,IAAI;MACbC,KAAK,EAAE;IACX,CAAC;EACL,CAAC;EACD,MAAMC,WAAWA,CAAA,EAAG;IAGhB;IACA,MAAMC,KAAI,GAAIC,YAAY,CAACC,OAAO,CAAC,WAAW,CAAC;IAE/C,IAAI;MACA,IAAI,CAAClB,IAAI,CAACC,EAAC,GAAI,IAAI,CAACkB,MAAM,CAACC,MAAM,CAACC,MAAM;MACxC,IAAI,IAAI,CAACrB,IAAI,CAACC,EAAC,IAAK,IAAG,IAAK,IAAI,CAACD,IAAI,CAACC,EAAC,IAAKqB,SAAS,EAAE;QACnD,IAAI,CAACR,KAAI,GAAI,6CAA6C;QAC1D;MACJ;MAEA,MAAMS,QAAO,GAAI,MAAM3B,SAAS,CAAC4B,GAAG,CAChC,UAAU,IAAI,CAACL,MAAM,CAACC,MAAM,CAACC,MAAM,EACvC,CAAC;;MAED;MACA,MAAMI,IAAG,GAAI,IAAIC,IAAI,CAACH,QAAQ,CAACzB,IAAI,CAACS,UAAU,CAAC;MAC/C,MAAMoB,OAAM,GAAI;QAAEC,IAAI,EAAE,SAAS;QAAEC,KAAK,EAAE,MAAM;QAAEC,GAAG,EAAE;MAAU,CAAC;MAClE,MAAMC,aAAY,GAAIN,IAAI,CAACO,kBAAkB,CAAC,OAAO,EAAEL,OAAO,CAAC;MAC/D,IAAI,CAAC3B,IAAG,GAAIuB,QAAQ,CAACzB,IAAI;MACzB,IAAI,CAACE,IAAI,CAACO,UAAS,GAAIwB,aAAa;MACpC;IACJ,EAAE,OAAOE,GAAG,EAAE;MACV,IAAI,CAACC,OAAO,CAACC,IAAI,CAAC,GAAG,CAAC;IAE1B;IACA;IACA;IACA,IAAI;MACA,MAAMC,GAAE,GAAI,MAAMxC,SAAS,CAAC4B,GAAG,CAAC,mBAAmB,EAAE;QACjDa,OAAO,EAAE;UACLC,aAAa,EAAE,UAAUrB,YAAY,CAACC,OAAO,CAAC,WAAW,CAAC;QAC9D;MACJ,CAAC,CAAC;MACF,IAAI,CAACnB,UAAS,GAAIqC,GAAG,CAACtC,IAAI;IAC9B,EAAE,OAAOmC,GAAG,EAAE;MACV,IAAI,CAACnB,KAAI,GAAI,qDAAqD;IACtE;IAEA,IAAI;MACA,MAAMsB,GAAE,GAAI,MAAMxC,SAAS,CAAC4B,GAAG,CAAC,YAAY,EACxC;QACIa,OAAO,EAAE;UACLC,aAAa,EAAE,UAAUtB,KAAK;QAClC;MACJ,CAEJ,CAAC;MACD,IAAI,CAACJ,QAAO,GAAIwB,GAAG,CAACtC,IAAI;IAE5B,EAAE,OAAOmC,GAAG,EAAE;MACV,IAAI,CAACnB,KAAI,GAAI,iDAAiD;IAClE;EAGJ,CAAC;EACDyB,UAAU,EAAE;IAAE1C;EAAW;AAC7B,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
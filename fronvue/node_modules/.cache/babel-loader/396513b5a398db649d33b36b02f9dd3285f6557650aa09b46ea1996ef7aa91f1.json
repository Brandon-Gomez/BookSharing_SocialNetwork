{"ast":null,"code":"import apiClient from '@/services/ApiService';\nimport eventBus from '@/eventBus';\nexport default {\n  data() {\n    return {\n      categories: [],\n      showForm: false,\n      editCategory: null,\n      form: {\n        name: '',\n        description: ''\n      }\n    };\n  },\n  methods: {\n    async fetchCategories() {\n      const token = localStorage.getItem('authToken');\n      const res = await apiClient.get('/admin/categories', {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      this.categories = res.data;\n    },\n    edit(cat) {\n      this.editCategory = cat;\n      this.form = {\n        name: cat.name,\n        description: cat.description\n      };\n      this.showForm = true;\n    },\n    async save() {\n      const token = localStorage.getItem('authToken');\n      if (this.editCategory) {\n        await apiClient.put(`/admin/categories/${this.editCategory.id}`, this.form, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        eventBus.emit('alert', {\n          message: \"Categoría actualizada correctamente\",\n          type: \"success\"\n        });\n      } else {\n        await apiClient.post('/admin/categories', this.form, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        eventBus.emit('alert', {\n          message: \"Categoría creada correctamente\",\n          type: \"success\"\n        });\n      }\n      this.showForm = false;\n      this.form = {\n        name: '',\n        description: ''\n      };\n      this.editCategory = null;\n      this.fetchCategories();\n    },\n    async remove(id) {\n      if (confirm('¿Eliminar esta categoría?')) {\n        const token = localStorage.getItem('authToken');\n        await apiClient.delete(`/admin/categories/${id}`, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        this.fetchCategories();\n        eventBus.emit('alert', {\n          message: \"Categoría eliminada correctamente\",\n          type: \"success\"\n        });\n      }\n    }\n  },\n  mounted() {\n    this.fetchCategories();\n  }\n};","map":{"version":3,"names":["apiClient","eventBus","data","categories","showForm","editCategory","form","name","description","methods","fetchCategories","token","localStorage","getItem","res","get","headers","Authorization","edit","cat","save","put","id","emit","message","type","post","remove","confirm","delete","mounted"],"sources":["D:\\Downloads\\BookSharing_SocialNetwork\\fronvue\\src\\components\\admin\\categories-list_component.vue"],"sourcesContent":["<template>\r\n    <div class=\"container\">\r\n        <h2>Categorías</h2>\r\n        <button class=\"btn btn-primary mb-3\" @click=\"showForm = true; editCategory = null;\">Nueva Categoría</button>\r\n        <table class=\"table table-striped\">\r\n            <thead>\r\n                <tr>\r\n                    <th>ID</th>\r\n                    <th>Nombre</th>\r\n                    <th>Descripción</th>\r\n                    <th>Acciones</th>\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                <tr v-for=\"cat in categories\" :key=\"cat.id\">\r\n                    <td>{{ cat.id }}</td>\r\n                    <td>{{ cat.name }}</td>\r\n                    <td>{{ cat.description }}</td>\r\n                    <td>\r\n                        <button class=\"btn btn-warning btn-sm\" @click=\"edit(cat)\">Editar</button>\r\n                        <button class=\"btn btn-danger btn-sm\" @click=\"remove(cat.id)\">Eliminar</button>\r\n                    </td>\r\n                </tr>\r\n            </tbody>\r\n        </table>\r\n\r\n        <!-- Formulario modal simple -->\r\n        <div v-if=\"showForm\" class=\"modal-backdrop\">\r\n            <div class=\"modal-content p-4\">\r\n                <h4>{{ editCategory ? 'Editar' : 'Nueva' }} Categoría</h4>\r\n                <form @submit.prevent=\"save\">\r\n                    <div class=\"mb-2\">\r\n                        <input v-model=\"form.name\" class=\"form-control\" placeholder=\"Nombre\" required />\r\n                    </div>\r\n                    <div class=\"mb-2\">\r\n                        <textarea v-model=\"form.description\" class=\"form-control\" placeholder=\"Descripción\"></textarea>\r\n                    </div>\r\n                    <div class=\"d-flex justify-content-between py-2\">\r\n                        <button class=\"btn btn-success \" type=\"submit\">Guardar</button>\r\n                        <button class=\"btn btn-secondary\" type=\"button\" @click=\"showForm = false\">Cancelar</button>\r\n                    </div>\r\n\r\n                </form>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport apiClient from '@/services/ApiService';\r\nimport eventBus from '@/eventBus';\r\n\r\nexport default {\r\n    data() {\r\n        return {\r\n            categories: [],\r\n            showForm: false,\r\n            editCategory: null,\r\n            form: { name: '', description: '' }\r\n        };\r\n    },\r\n    methods: {\r\n        async fetchCategories() {\r\n            const token = localStorage.getItem('authToken');\r\n            const res = await apiClient.get('/admin/categories', { headers: { Authorization: `Bearer ${token}` } });\r\n            this.categories = res.data;\r\n        },\r\n        edit(cat) {\r\n            this.editCategory = cat;\r\n            this.form = { name: cat.name, description: cat.description };\r\n            this.showForm = true;\r\n        },\r\n        async save() {\r\n            const token = localStorage.getItem('authToken');\r\n            if (this.editCategory) {\r\n                await apiClient.put(`/admin/categories/${this.editCategory.id}`, this.form, { headers: { Authorization: `Bearer ${token}` } });\r\n                eventBus.emit('alert', { message: \"Categoría actualizada correctamente\", type: \"success\" });\r\n            } else {\r\n                await apiClient.post('/admin/categories', this.form, { headers: { Authorization: `Bearer ${token}` } });\r\n                eventBus.emit('alert', { message: \"Categoría creada correctamente\", type: \"success\" });\r\n            }\r\n            this.showForm = false;\r\n            this.form = { name: '', description: '' };\r\n            this.editCategory = null;\r\n            this.fetchCategories();\r\n        },\r\n        async remove(id) {\r\n            if (confirm('¿Eliminar esta categoría?')) {\r\n                const token = localStorage.getItem('authToken');\r\n                await apiClient.delete(`/admin/categories/${id}`, { headers: { Authorization: `Bearer ${token}` } });\r\n                this.fetchCategories();\r\n                eventBus.emit('alert', { message: \"Categoría eliminada correctamente\", type: \"success\" });\r\n            }\r\n        }\r\n    },\r\n    mounted() {\r\n        this.fetchCategories();\r\n    }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.modal-backdrop {\r\n    position: fixed;\r\n    top: 0;\r\n    left: 0;\r\n    right: 0;\r\n    bottom: 0;\r\n    background: rgba(0, 0, 0, 0.3);\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    z-index: 9999;\r\n}\r\n\r\n.modal-content {\r\n    background: #fff;\r\n    border-radius: 8px;\r\n    min-width: 300px;\r\n    max-width: 400px;\r\n}\r\n</style>"],"mappings":"AAiDA,OAAOA,SAAQ,MAAO,uBAAuB;AAC7C,OAAOC,QAAO,MAAO,YAAY;AAEjC,eAAe;EACXC,IAAIA,CAAA,EAAG;IACH,OAAO;MACHC,UAAU,EAAE,EAAE;MACdC,QAAQ,EAAE,KAAK;MACfC,YAAY,EAAE,IAAI;MAClBC,IAAI,EAAE;QAAEC,IAAI,EAAE,EAAE;QAAEC,WAAW,EAAE;MAAG;IACtC,CAAC;EACL,CAAC;EACDC,OAAO,EAAE;IACL,MAAMC,eAAeA,CAAA,EAAG;MACpB,MAAMC,KAAI,GAAIC,YAAY,CAACC,OAAO,CAAC,WAAW,CAAC;MAC/C,MAAMC,GAAE,GAAI,MAAMd,SAAS,CAACe,GAAG,CAAC,mBAAmB,EAAE;QAAEC,OAAO,EAAE;UAAEC,aAAa,EAAE,UAAUN,KAAK;QAAG;MAAE,CAAC,CAAC;MACvG,IAAI,CAACR,UAAS,GAAIW,GAAG,CAACZ,IAAI;IAC9B,CAAC;IACDgB,IAAIA,CAACC,GAAG,EAAE;MACN,IAAI,CAACd,YAAW,GAAIc,GAAG;MACvB,IAAI,CAACb,IAAG,GAAI;QAAEC,IAAI,EAAEY,GAAG,CAACZ,IAAI;QAAEC,WAAW,EAAEW,GAAG,CAACX;MAAY,CAAC;MAC5D,IAAI,CAACJ,QAAO,GAAI,IAAI;IACxB,CAAC;IACD,MAAMgB,IAAIA,CAAA,EAAG;MACT,MAAMT,KAAI,GAAIC,YAAY,CAACC,OAAO,CAAC,WAAW,CAAC;MAC/C,IAAI,IAAI,CAACR,YAAY,EAAE;QACnB,MAAML,SAAS,CAACqB,GAAG,CAAC,qBAAqB,IAAI,CAAChB,YAAY,CAACiB,EAAE,EAAE,EAAE,IAAI,CAAChB,IAAI,EAAE;UAAEU,OAAO,EAAE;YAAEC,aAAa,EAAE,UAAUN,KAAK;UAAG;QAAE,CAAC,CAAC;QAC9HV,QAAQ,CAACsB,IAAI,CAAC,OAAO,EAAE;UAAEC,OAAO,EAAE,qCAAqC;UAAEC,IAAI,EAAE;QAAU,CAAC,CAAC;MAC/F,OAAO;QACH,MAAMzB,SAAS,CAAC0B,IAAI,CAAC,mBAAmB,EAAE,IAAI,CAACpB,IAAI,EAAE;UAAEU,OAAO,EAAE;YAAEC,aAAa,EAAE,UAAUN,KAAK;UAAG;QAAE,CAAC,CAAC;QACvGV,QAAQ,CAACsB,IAAI,CAAC,OAAO,EAAE;UAAEC,OAAO,EAAE,gCAAgC;UAAEC,IAAI,EAAE;QAAU,CAAC,CAAC;MAC1F;MACA,IAAI,CAACrB,QAAO,GAAI,KAAK;MACrB,IAAI,CAACE,IAAG,GAAI;QAAEC,IAAI,EAAE,EAAE;QAAEC,WAAW,EAAE;MAAG,CAAC;MACzC,IAAI,CAACH,YAAW,GAAI,IAAI;MACxB,IAAI,CAACK,eAAe,CAAC,CAAC;IAC1B,CAAC;IACD,MAAMiB,MAAMA,CAACL,EAAE,EAAE;MACb,IAAIM,OAAO,CAAC,2BAA2B,CAAC,EAAE;QACtC,MAAMjB,KAAI,GAAIC,YAAY,CAACC,OAAO,CAAC,WAAW,CAAC;QAC/C,MAAMb,SAAS,CAAC6B,MAAM,CAAC,qBAAqBP,EAAE,EAAE,EAAE;UAAEN,OAAO,EAAE;YAAEC,aAAa,EAAE,UAAUN,KAAK;UAAG;QAAE,CAAC,CAAC;QACpG,IAAI,CAACD,eAAe,CAAC,CAAC;QACtBT,QAAQ,CAACsB,IAAI,CAAC,OAAO,EAAE;UAAEC,OAAO,EAAE,mCAAmC;UAAEC,IAAI,EAAE;QAAU,CAAC,CAAC;MAC7F;IACJ;EACJ,CAAC;EACDK,OAAOA,CAAA,EAAG;IACN,IAAI,CAACpB,eAAe,CAAC,CAAC;EAC1B;AACJ,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
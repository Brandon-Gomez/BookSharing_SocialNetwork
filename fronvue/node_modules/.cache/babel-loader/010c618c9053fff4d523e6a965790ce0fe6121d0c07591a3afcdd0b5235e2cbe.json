{"ast":null,"code":"import { createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, vModelSelect as _vModelSelect, withModifiers as _withModifiers, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"container-fluid mt-4\"\n};\nconst _hoisted_2 = {\n  class: \"w-50\"\n};\nconst _hoisted_3 = {\n  class: \"form-group mb-3\"\n};\nconst _hoisted_4 = {\n  class: \"form-group mb-3\"\n};\nconst _hoisted_5 = {\n  class: \"form-group mb-3\"\n};\nconst _hoisted_6 = {\n  class: \"form-group mb-3\"\n};\nconst _hoisted_7 = {\n  class: \"form-group mb-3\"\n};\nconst _hoisted_8 = {\n  class: \"form-group mb-3\"\n};\nconst _hoisted_9 = {\n  class: \"form-group mb-3\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_cache[19] || (_cache[19] = _createElementVNode(\"h2\", null, \"Editar Usuario\", -1 /* HOISTED */)), _createElementVNode(\"form\", {\n    onSubmit: _cache[9] || (_cache[9] = _withModifiers((...args) => $options.updateUser && $options.updateUser(...args), [\"prevent\"])),\n    class: \"mt-4\"\n  }, [_createElementVNode(\"div\", _hoisted_3, [_cache[10] || (_cache[10] = _createElementVNode(\"label\", {\n    for: \"email\"\n  }, \"Correo Electrónico\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"input\", {\n    type: \"email\",\n    id: \"email\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.userData.email = $event),\n    class: \"form-control form-control-sm\",\n    placeholder: \"Correo electrónico\",\n    required: \"\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.userData.email]])]), _createElementVNode(\"div\", _hoisted_4, [_cache[11] || (_cache[11] = _createElementVNode(\"label\", {\n    for: \"password\"\n  }, \"Contraseña (dejar vacío para no cambiar)\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"input\", {\n    type: \"password\",\n    id: \"password\",\n    autocomplete: \"new-password\",\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.userData.password = $event),\n    class: \"form-control form-control-sm\",\n    placeholder: \"Contraseña\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.userData.password]])]), _createElementVNode(\"div\", _hoisted_5, [_cache[12] || (_cache[12] = _createElementVNode(\"label\", {\n    for: \"username\"\n  }, \"Nombre de Usuario\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    id: \"username\",\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $data.userData.username = $event),\n    class: \"form-control form-control-sm\",\n    placeholder: \"Nombre de usuario\",\n    required: \"\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.userData.username]])]), _createElementVNode(\"div\", _hoisted_6, [_cache[13] || (_cache[13] = _createElementVNode(\"label\", {\n    for: \"name\"\n  }, \"Nombre\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    id: \"name\",\n    \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => $data.userData.name = $event),\n    class: \"form-control form-control-sm\",\n    placeholder: \"Nombre completo\",\n    required: \"\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.userData.name]])]), _createElementVNode(\"div\", _hoisted_7, [_cache[14] || (_cache[14] = _createElementVNode(\"label\", {\n    for: \"birthdate\"\n  }, \"Fecha de Nacimiento\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"input\", {\n    type: \"date\",\n    id: \"birthdate\",\n    \"onUpdate:modelValue\": _cache[4] || (_cache[4] = $event => $data.userData.birthdate = $event),\n    class: \"form-control form-control-sm\",\n    placeholder: \"Fecha de nacimiento\",\n    required: \"\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.userData.birthdate]])]), _createElementVNode(\"div\", _hoisted_8, [_cache[15] || (_cache[15] = _createElementVNode(\"label\", {\n    for: \"description\"\n  }, \"Descripción\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"textarea\", {\n    maxlength: \"150\",\n    id: \"description\",\n    \"onUpdate:modelValue\": _cache[5] || (_cache[5] = $event => $data.userData.description = $event),\n    class: \"form-control form-control-sm\",\n    placeholder: \"Descripción\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.userData.description]])]), _createElementVNode(\"div\", _hoisted_9, [_cache[17] || (_cache[17] = _createElementVNode(\"label\", {\n    for: \"is_admin\"\n  }, \"Rol\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"select\", {\n    id: \"is_admin\",\n    \"onUpdate:modelValue\": _cache[6] || (_cache[6] = $event => $data.userData.is_admin = $event),\n    class: \"form-control form-control-sm\",\n    onSelect: _cache[7] || (_cache[7] = (...args) => $data.userData.is_admin && $data.userData.is_admin(...args))\n  }, _cache[16] || (_cache[16] = [_createElementVNode(\"option\", {\n    value: false\n  }, \"Usuario\", -1 /* HOISTED */), _createElementVNode(\"option\", {\n    value: true\n  }, \"Administrador\", -1 /* HOISTED */)]), 544 /* NEED_HYDRATION, NEED_PATCH */), [[_vModelSelect, $data.userData.is_admin]])]), _cache[18] || (_cache[18] = _createElementVNode(\"button\", {\n    type: \"submit\",\n    class: \"btn btn-primary\"\n  }, \"Actualizar Usuario\", -1 /* HOISTED */)), _createElementVNode(\"button\", {\n    type: \"button\",\n    class: \"btn btn-secondary ml-3\",\n    onClick: _cache[8] || (_cache[8] = (...args) => $options.cancel && $options.cancel(...args))\n  }, \" Cancelar \")], 32 /* NEED_HYDRATION */)])]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","onSubmit","_cache","_withModifiers","args","$options","updateUser","_hoisted_3","for","type","id","$event","$data","userData","email","placeholder","required","_hoisted_4","autocomplete","password","_hoisted_5","username","_hoisted_6","name","_hoisted_7","birthdate","_hoisted_8","maxlength","description","_hoisted_9","is_admin","onSelect","value","onClick","cancel"],"sources":["D:\\Downloads\\BookSharing_SocialNetwork\\fronvue\\src\\components\\admin\\user-edit_component.vue"],"sourcesContent":["<template>\r\n    <div class=\"container-fluid mt-4\">\r\n        <div class=\"w-50\">\r\n            <h2>Editar Usuario</h2>\r\n            <form @submit.prevent=\"updateUser\" class=\"mt-4\">\r\n                <div class=\"form-group mb-3\">\r\n                    <label for=\"email\">Correo Electrónico</label>\r\n                    <input type=\"email\" id=\"email\" v-model=\"userData.email\" class=\"form-control form-control-sm\"\r\n                        placeholder=\"Correo electrónico\" required />\r\n                </div>\r\n                <div class=\"form-group mb-3\">\r\n                    <label for=\"password\">Contraseña (dejar vacío para no cambiar)</label>\r\n                    <input type=\"password\" id=\"password\" \r\n                    autocomplete=\"new-password\"\r\n                    v-model=\"userData.password\" class=\"form-control form-control-sm\"\r\n                        placeholder=\"Contraseña\" />\r\n                </div>\r\n                <div class=\"form-group mb-3\">\r\n                    <label for=\"username\">Nombre de Usuario</label>\r\n                    <input type=\"text\" id=\"username\" v-model=\"userData.username\" class=\"form-control form-control-sm\"\r\n                        placeholder=\"Nombre de usuario\" required />\r\n                </div>\r\n                <div class=\"form-group mb-3\">\r\n                    <label for=\"name\">Nombre</label>\r\n                    <input type=\"text\" id=\"name\" v-model=\"userData.name\" class=\"form-control form-control-sm\"\r\n                        placeholder=\"Nombre completo\" required />\r\n                </div>\r\n                <div class=\"form-group mb-3\">\r\n                    <label for=\"birthdate\">Fecha de Nacimiento</label>\r\n                    <input type=\"date\" id=\"birthdate\" v-model=\"userData.birthdate\" class=\"form-control form-control-sm\"\r\n                        placeholder=\"Fecha de nacimiento\" required />\r\n                </div>\r\n                <div class=\"form-group mb-3\">\r\n                    <label for=\"description\">Descripción</label>\r\n                    <textarea  maxlength=\"150\" id=\"description\" v-model=\"userData.description\" class=\"form-control form-control-sm\"\r\n                        placeholder=\"Descripción\"></textarea>\r\n                </div>\r\n                <div class=\"form-group mb-3\">\r\n                    <label for=\"is_admin\">Rol</label>\r\n                    <select id=\"is_admin\" v-model=\"userData.is_admin\" class=\"form-control form-control-sm\"\r\n                        v-on:select=\"userData.is_admin\">\r\n                        <option :value=\"false\">Usuario</option>\r\n                        <option :value=\"true\">Administrador</option>\r\n                    </select>\r\n                </div>\r\n                <button type=\"submit\" class=\"btn btn-primary\">Actualizar Usuario</button>\r\n                <button type=\"button\" class=\"btn btn-secondary ml-3\" @click=\"cancel\">\r\n                    Cancelar\r\n                </button>\r\n            </form>\r\n        </div>\r\n\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport apiClient from \"@/services/ApiService\";\r\n\r\nexport default {\r\n    data() {\r\n        return {\r\n            userData: {\r\n                email: \"\",\r\n                password: \"\",\r\n                username: \"\",\r\n                name: \"\",\r\n                birthdate: \"\",\r\n                description: \"\",\r\n                is_admin: \"\",\r\n            },\r\n        };\r\n    },\r\n    async mounted() {\r\n        await this.fetchUser();\r\n    },\r\n    methods: {\r\n        async fetchUser() {\r\n            try {\r\n                const token = localStorage.getItem(\"authToken\");\r\n                const userId = this.$route.params.userId;\r\n                const response = await apiClient.get(`/users/${userId}`, {\r\n                    headers: {\r\n                        Authorization: `Bearer ${token}`\r\n                    }\r\n                });\r\n                let user = response.data.user;\r\n                // Formatea la fecha para el input date\r\n                if (user.birthdate) {\r\n                    user.birthdate = user.birthdate.split('T')[0];\r\n                }\r\n                this.userData = {\r\n                    ...user,\r\n                    password: \"\"\r\n                };\r\n            } catch (error) {\r\n                console.error(\"Error al obtener el usuario:\", error.response?.data || error);\r\n                alert(\"Error al obtener los datos del usuario.\");\r\n            }\r\n        },\r\n        async updateUser() {\r\n            try {\r\n                const token = localStorage.getItem(\"authToken\");\r\n                const userId = this.$route.params.userId;\r\n                // Si el campo password está vacío, no lo envíes\r\n                const dataToSend = { ...this.userData };\r\n                if (!dataToSend.password) delete dataToSend.password;\r\n\r\n                await apiClient.put(\r\n                    `/users/${userId}`,\r\n                    dataToSend,\r\n                    {\r\n                        headers: {\r\n                            Authorization: `Bearer ${token}`\r\n                        }\r\n                    }\r\n                );\r\n\r\n                this.$router.push({\r\n                    path: \"/admin/users-list\",\r\n                    query: { alert: \"Usuario actualizado exitosamente\", type: \"success\" }\r\n                });\r\n            } catch (error) {\r\n                // Manejo de errores\r\n                this.$router.push({\r\n                    path: \"/admin/users-list\",\r\n                    query: { alert: \"Error al actualizar el usuario\", type: \"danger\" }\r\n                });\r\n            }\r\n        },\r\n        cancel() {\r\n            this.$router.push(\"/admin/users-list\");\r\n        },\r\n    },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.container {\r\n    max-width: 600px;\r\n}\r\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport apiClient from \"@/services/ApiService\";\nimport { logoutUser } from \"@/services/useAuth.js\";\nexport default {\n  data() {\n    return {\n      page: 1,\n      totalPages: 0,\n      postsPerPage: 6,\n      userData: {\n        id: \"\",\n        name: \"\",\n        username: \"\",\n        birthdate: \"\",\n        description: \"\",\n        profile_picture: \"\"\n      },\n      // se usa para determinar si el perfil mostrado es el del usuario logeado (no es el caso para este listado)\n      isCurrentUser: null,\n      follows: {\n        isFollowing: false,\n        followers: [],\n        followers_count: 0,\n        following: 0\n      },\n      countPosts: 0,\n      profileImageFile: null,\n      profilePhoto: null,\n      // Para la vista previa\n      posts: []\n    };\n  },\n  computed: {\n    currentUserId() {\n      const userData = localStorage.getItem(\"userData\");\n      if (userData) {\n        // Convertimos el id a string para asegurar la comparación posterior\n        return JSON.parse(userData).id.toString();\n      }\n      return \"\";\n    }\n  },\n  methods: {\n    onPageChange(n) {\n      this.page = n;\n      this.fetchPosts();\n    },\n    async fetchUser() {\n      try {\n        const token = localStorage.getItem(\"authToken\");\n        const username = this.$route.params.username || localStorage.getItem(\"username\");\n        const response = await apiClient.get(`/profile/${username}`, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        let user = response.data.user;\n        if (user.birthdate) {\n          user.birthdate = user.birthdate.split(\"T\")[0];\n        }\n        this.userData = {\n          ...user,\n          password: \"\"\n        };\n        this.isCurrentUser = response.data.isCurrentUser;\n\n        // Obtener seguidos\n        if (user.id) {\n          const resFollowing = await apiClient.get(`/follow/following/count/${user.id}`, {\n            headers: {\n              Authorization: `Bearer ${token}`\n            }\n          });\n          this.follows.following = resFollowing.data.followingCount || 0;\n\n          // Si no es el usuario actual, consulta si lo sigue\n          if (!this.isCurrentUser) {\n            const resIsFollowing = await apiClient.get(`/follow/check/${user.id}`, {\n              headers: {\n                Authorization: `Bearer ${token}`\n              }\n            });\n            this.follows.isFollowing = resIsFollowing.data.isFollowing;\n          }\n\n          // Llamamos a fetchFollowers para obtener la lista completa de seguidores\n          await this.fetchFollowers();\n        }\n\n        // Cantidad de publicaciones\n        const res = await apiClient.get(`/posts/count/${user.id}`);\n        this.countPosts = res.data.post_count;\n      } catch (error) {\n        console.error(\"Error al obtener el usuario:\", error.response?.data || error);\n        alert(\"Error al obtener los datos del usuario.\");\n      }\n    },\n    async fetchFollowers() {\n      try {\n        const token = localStorage.getItem(\"authToken\");\n        const resFollowers = await apiClient.get(`/follow/followers/${this.userData.id}`, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        this.follows.followers = resFollowers.data || [];\n        this.follows.followers_count = this.follows.followers.length;\n        // Para cada seguidor se consulta si el usuario logueado ya lo sigue\n        for (let follower of this.follows.followers) {\n          // Si el seguidor es el usuario actual, no se consulta el endpoint\n          if (follower.id.toString() === this.currentUserId) {\n            this.$set(follower, \"isFollowed\", false);\n            continue;\n          }\n          try {\n            // Se asume que el endpoint /follow/check acepta currentUserId como parámetro\n            const resCheck = await apiClient.get(`/follow/check/${follower.id}`, {\n              headers: {\n                Authorization: `Bearer ${token}`\n              },\n              params: {\n                currentUserId: this.currentUserId\n              }\n            });\n            const followed = resCheck.data.isFollowing === true || resCheck.data.isFollowing === 1;\n            follower.isFollowed = followed;\n          } catch (error) {\n            this.$set(follower, \"isFollowed\", false);\n            this.$set(follower, \"isFollowed\", followed);\n          }\n        }\n      } catch (error) {\n        console.error(\"Error al obtener los seguidores:\", error.response?.data || error);\n      }\n    },\n    async toggleFollowerFollow(followerId) {\n      const token = localStorage.getItem(\"authToken\");\n      // Se localiza el seguidor en la lista\n      const follower = this.follows.followers.find(f => f.id === followerId);\n      if (!follower) return;\n      try {\n        if (follower.isFollowed) {\n          // Desfollow\n          await apiClient.delete(`/follow/${followerId}`, {\n            headers: {\n              Authorization: `Bearer ${token}`\n            },\n            data: {\n              followed_id: followerId\n            }\n          });\n          follower.isFollowed = false;\n        } else {\n          // Follow\n          await apiClient.post(`/follow`, {\n            followed_id: followerId\n          }, {\n            headers: {\n              Authorization: `Bearer ${token}`\n            }\n          });\n          follower.isFollowed = true;\n        }\n      } catch (error) {\n        console.error(\"Error al cambiar el estado de seguimiento:\", error);\n      }\n    },\n    getUserImage() {\n      return this.userData.profile_picture || \"https://firebasestorage.googleapis.com/v0/b/booksharing-socialnetwork.appspot.com/o/profile%2Fdefault.jpg?alt=media\";\n    },\n    logout() {\n      logoutUser(this.$router);\n    },\n    goToEditProfile() {\n      this.$router.push(`/profile/${this.userData.username}/edit-account`);\n    },\n    editPost(post) {\n      // Redirige a la vista de edición del post del usuario\n      this.$router.push(`/posts/${post.id}/edit-post`);\n    },\n    async deletePost(post) {\n      if (confirm(\"¿Estás seguro de que deseas eliminar esta publicación?\")) {\n        try {\n          const token = localStorage.getItem(\"authToken\");\n          await apiClient.delete(`/posts/${post.id}`, {\n            headers: {\n              Authorization: `Bearer ${token}`\n            }\n          });\n          // Recarga las publicaciones después de eliminar\n          this.fetchPosts();\n          alert(\"Publicación eliminada correctamente\");\n        } catch (error) {\n          alert(\"Error al eliminar la publicación\");\n          console.error(error);\n        }\n      }\n    },\n    async toggleFollow() {\n      try {\n        const token = localStorage.getItem(\"authToken\");\n        const userId = this.userData.id;\n        const action = this.follows.isFollowing ? \"unfollow\" : \"follow\";\n        if (action === \"follow\") {\n          await apiClient.post(`/follow`, {\n            followed_id: userId\n          }, {\n            headers: {\n              Authorization: `Bearer ${token}`\n            }\n          });\n          this.follows.isFollowing = true;\n        } else {\n          await apiClient.delete(`/follow/${userId}`, {\n            headers: {\n              Authorization: `Bearer ${token}`\n            },\n            data: {\n              followed_id: userId\n            } // algunos clientes requieren esto, pero tu backend solo usa el param\n          });\n          this.follows.isFollowing = false;\n        }\n        // Actualiza la lista de seguidores\n        await this.fetchFollowers();\n      } catch (error) {\n        console.error(\"Error al seguir/dejar de seguir:\", error);\n      }\n    }\n  },\n  beforeMount() {\n    this.fetchUser();\n  }\n};","map":{"version":3,"names":["apiClient","logoutUser","data","page","totalPages","postsPerPage","userData","id","name","username","birthdate","description","profile_picture","isCurrentUser","follows","isFollowing","followers","followers_count","following","countPosts","profileImageFile","profilePhoto","posts","computed","currentUserId","localStorage","getItem","JSON","parse","toString","methods","onPageChange","n","fetchPosts","fetchUser","token","$route","params","response","get","headers","Authorization","user","split","password","resFollowing","followingCount","resIsFollowing","fetchFollowers","res","post_count","error","console","alert","resFollowers","length","follower","$set","resCheck","followed","isFollowed","toggleFollowerFollow","followerId","find","f","delete","followed_id","post","getUserImage","logout","$router","goToEditProfile","push","editPost","deletePost","confirm","toggleFollow","userId","action","beforeMount"],"sources":["D:\\Downloads\\BookSharing_SocialNetwork\\fronvue\\src\\layouts\\ProfileLayout.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <div class=\"page-title-overlap bg-dark pt-4\">\r\n      <div\r\n        class=\"container d-flex flex-wrap flex-sm-nowrap justify-content-center justify-content-sm-between align-items-center pt-2\">\r\n        <div class=\"d-flex align-items-center pb-3\">\r\n          <div class=\"rounded-circle position-relative flex-shrink-0\" style=\"width: 6.375rem\">\r\n            <img class=\"rounded-circle\" :src=\"getUserImage()\" :alt=\"userData.name\" />\r\n          </div>\r\n          <div class=\"ps-3\">\r\n            <h3 class=\"text-light fs-lg mb-0\">{{ userData.name }}</h3>\r\n            <span class=\"d-block text-light fs-ms opacity-60 py-1\">@{{ userData.username }}</span>\r\n            <span class=\"d-block text-light fs-ms py-1 w-75\" style=\"max-width: 450px\">\r\n              {{ userData.description }}</span>\r\n          </div>\r\n        </div>\r\n        <!-- Desktop version -->\r\n        <div class=\"d-none d-sm-flex flex-column align-items-end\">\r\n          <div class=\"d-flex\">\r\n            <div class=\"text-end\">\r\n              <div class=\"text-light fs-base\">{{ countPosts }}</div>\r\n              <div class=\"text-light fs-ms opacity-60 py-1\">Publicaciones</div>\r\n            </div>\r\n            <div class=\"text-end ml-3\">\r\n              <div class=\"text-light fs-base\">{{ follows.followers.length }}</div>\r\n              <div class=\"text-light fs-ms opacity-60 py-1\">\r\n                <a type=\"button\" data-bs-toggle=\"modal\" data-bs-target=\"#followersModal\">Seguidores</a>\r\n              </div>\r\n            </div>\r\n            <div class=\"text-end ml-3\">\r\n              <div class=\"text-light fs-base\">{{ follows.following }}</div>\r\n              <div class=\"text-light fs-ms opacity-60 py-1\">Siguiendo</div>\r\n            </div>\r\n          </div>\r\n          <div class=\"text-center mt-2\" v-if=\"!isCurrentUser\">\r\n            <button class=\"btn btn-secondary btn-sm align-middle\" @click=\"toggleFollow\">\r\n              {{ follows.isFollowing ? \"Dejar de seguir\" : \"Seguir\" }}\r\n            </button>\r\n          </div>\r\n        </div>\r\n        <!-- Mobile version -->\r\n        <div class=\"d-flex d-sm-none w-100 justify-content-around my-3\">\r\n          <div class=\"text-center\">\r\n            <div class=\"text-light fs-6 fw-bold\">{{ countPosts }}</div>\r\n            <div class=\"text-light fs-ms opacity-60 py-1\">Publicaciones</div>\r\n          </div>\r\n\r\n          <div class=\"text-center\">\r\n            <div class=\"text-light fs-6 fw-bold\">{{ follows.followers_count }}</div>\r\n            <div class=\"text-light fs-ms opacity-60 py-1\">Seguidores</div>\r\n          </div>\r\n          <div class=\"text-center\">\r\n            <div class=\"text-light fs-6 fw-bold\">{{ follows.following }}</div>\r\n            <div class=\"text-light fs-ms opacity-60 py-1\">Seguidos</div>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- seguir usuario buton -->\r\n        <div class=\"d-lg-none\">\r\n          <button class=\"btn btn-secondary btn-sm\" v-if=\"!isCurrentUser\" @click=\"toggleFollow\">\r\n            {{ follows.isFollowing ? \"Dejar de seguir\" : \"Seguir\" }}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"container mb-5 pb-3\">\r\n      <div class=\"bg-light shadow-lg rounded-3 overflow-hidden\">\r\n        <div class=\"row\">\r\n          <!-- Sidebar-->\r\n          <aside class=\"col-lg-4 pt-2 pt-lg-0 pe-xl-4\">\r\n            <div class=\"d-block d-lg-none p-4\">\r\n              <a class=\"btn btn-outline-accent d-block\" href=\"#account-menu\" data-bs-toggle=\"collapse\"\r\n                aria-expanded=\"true\"><i class=\"ci-menu me-2\"></i>Menu cuenta</a>\r\n            </div>\r\n            <div class=\"bg-white rounded-3 shadow-lg pt-1 mb-lg-0 mb-4\">\r\n              <div class=\"d-lg-block collapse\" id=\"account-menu\">\r\n                <div class=\"bg-secondary px-4 py-3\">\r\n                  <h3 class=\"fs-sm mb-0 text-muted\">Cuenta</h3>\r\n                </div>\r\n                <ul class=\"list-unstyled mb-0\">\r\n                  <li class=\"border-bottom mb-0\">\r\n                    <router-link :to=\"`/profile/${userData.username}/`\"\r\n                      class=\"nav-link-style d-flex align-items-center px-4 py-3\" active-class=\"active\">\r\n                      <i class=\"ci-book opacity-60 me-2\"></i>\r\n                      Publicaciones\r\n                    </router-link>\r\n                  </li>\r\n                  <li class=\"border-bottom mb-0\">\r\n                    <router-link :to=\"`/profile/${userData.username}/likes`\"\r\n                      class=\"nav-link-style d-flex align-items-center px-4 py-3\" active-class=\"active\">\r\n                      <i class=\"ci-heart opacity-60 me-2\"></i>\r\n                      Favoritos\r\n                    </router-link>\r\n                  </li>\r\n                 \r\n                </ul>\r\n                <div v-if=\"isCurrentUser\">\r\n                  <div class=\"bg-secondary px-4 py-3\">\r\n                    <h3 class=\"fs-sm mb-0 text-muted\">Configuración</h3>\r\n                  </div>\r\n                  <ul class=\"list-unstyled mb-0\">\r\n                    <li class=\"border-bottom mb-0\">\r\n                      <router-link :to=\"`/profile/${userData.username}/edit-account`\"\r\n                        class=\"nav-link-style d-flex align-items-center px-4 py-3\" active-class=\"active\">\r\n                        <i class=\"ci-user opacity-60 me-2\"></i>\r\n                        Información personal\r\n                      </router-link>\r\n                    </li>\r\n                    <li class=\"border-top mb-0\">\r\n                      <a type=\"button\" class=\"nav-link-style d-flex align-items-center px-4 py-3\" @click=\"logout\">\r\n                        <i class=\"ci-sign-out opacity-60 me-2\"></i>\r\n                        Cerrar sesión\r\n                      </a>\r\n                    </li>\r\n                  </ul>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </aside>\r\n          <!-- Content-->\r\n          <section class=\"col-lg-8 pt-lg-4 pb-4 mb-3\">\r\n            <slot></slot>\r\n          </section>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <div>\r\n      <!-- Botón para abrir el modal -->\r\n\r\n      <!-- Modal -->\r\n      <div class=\"modal fade\" id=\"followersModal\" tabindex=\"-1\" style=\"display: none\" aria-hidden=\"true\">\r\n        <div class=\"modal-dialog modal-dialog-scrollable\" role=\"document\" style=\"max-width: 400px; max-height: 400px\">\r\n          <div class=\"modal-content\">\r\n            <div class=\"modal-header\">\r\n              <h6 class=\"modal-title\">Seguidores</h6>\r\n              <button class=\"btn-close\" type=\"button\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n            </div>\r\n            <div class=\"modal-body fs-sm\">\r\n              <div class=\"row\">\r\n                <div class=\"col-12\">\r\n                  <ul class=\"list-unstyled mb-0\">\r\n                    <li v-for=\"follower in follows.followers\" :key=\"follower.id\" class=\"mb-2\">\r\n                      <div class=\"d-flex justify-content-between\">\r\n                        <div>\r\n                          <a :href=\"`/profile/${follower.username}`\" class=\"nav-link-style d-flex align-items-center\">\r\n                            <img :src=\"follower.profile_picture || 'https://firebasestorage.googleapis.com/v0/b/booksharing-socialnetwork.appspot.com/o/profile%2Fdefault.jpg?alt=media'\"\r\n                              alt=\"\" width=\"50\" height=\"50\" class=\"rounded-circle me-2\" />\r\n                            <div class=\"d-flex flex-column\">\r\n                              <span>@{{ follower.username }}</span>\r\n                              <span class=\"text-muted\">{{ follower.name }}</span>\r\n                            </div>\r\n                          </a>\r\n                        </div>\r\n                        <div class=\"d-flex align-items-center\">\r\n                          <!-- Se muestra el botón solo si el seguidor no es el usuario actual -->\r\n                          <button v-if=\"follower.id !== currentUserId\" class=\"btn btn-secondary btn-sm\"\r\n                            @click=\"toggleFollowerFollow(follower.id)\">\r\n                            {{ follower.isFollowed ? \"Dejar de seguir\" : \"Seguir\" }}\r\n                          </button>\r\n                        </div>\r\n                      </div>\r\n                    </li>\r\n                  </ul>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport apiClient from \"@/services/ApiService\";\r\nimport { logoutUser } from \"@/services/useAuth.js\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      page: 1,\r\n      totalPages: 0,\r\n      postsPerPage: 6,\r\n\r\n      userData: {\r\n        id: \"\",\r\n        name: \"\",\r\n        username: \"\",\r\n        birthdate: \"\",\r\n        description: \"\",\r\n        profile_picture: \"\",\r\n      },\r\n      // se usa para determinar si el perfil mostrado es el del usuario logeado (no es el caso para este listado)\r\n      isCurrentUser: null,\r\n      follows: {\r\n        isFollowing: false,\r\n        followers: [],\r\n        followers_count: 0,\r\n        following: 0,\r\n      },\r\n      countPosts: 0,\r\n      profileImageFile: null,\r\n      profilePhoto: null, // Para la vista previa\r\n      posts: [],\r\n    };\r\n  },\r\n\r\n  computed: {\r\n    currentUserId() {\r\n      const userData = localStorage.getItem(\"userData\");\r\n      if (userData) {\r\n        // Convertimos el id a string para asegurar la comparación posterior\r\n        return JSON.parse(userData).id.toString();\r\n      }\r\n      return \"\";\r\n    },\r\n  },\r\n\r\n  methods: {\r\n    onPageChange(n) {\r\n      this.page = n;\r\n      this.fetchPosts();\r\n    },\r\n\r\n    async fetchUser() {\r\n      try {\r\n        const token = localStorage.getItem(\"authToken\");\r\n        const username = this.$route.params.username || localStorage.getItem(\"username\");\r\n        const response = await apiClient.get(`/profile/${username}`, {\r\n          headers: { Authorization: `Bearer ${token}` },\r\n        });\r\n\r\n        let user = response.data.user;\r\n        if (user.birthdate) {\r\n          user.birthdate = user.birthdate.split(\"T\")[0];\r\n        }\r\n        this.userData = {\r\n          ...user,\r\n          password: \"\"\r\n        };\r\n        this.isCurrentUser = response.data.isCurrentUser;\r\n\r\n        // Obtener seguidos\r\n        if (user.id) {\r\n          const resFollowing = await apiClient.get(`/follow/following/count/${user.id}`, {\r\n            headers: { Authorization: `Bearer ${token}` },\r\n          });\r\n          this.follows.following = resFollowing.data.followingCount || 0;\r\n\r\n          // Si no es el usuario actual, consulta si lo sigue\r\n          if (!this.isCurrentUser) {\r\n            const resIsFollowing = await apiClient.get(`/follow/check/${user.id}`, {\r\n              headers: { Authorization: `Bearer ${token}` },\r\n            });\r\n            this.follows.isFollowing = resIsFollowing.data.isFollowing;\r\n          }\r\n\r\n          // Llamamos a fetchFollowers para obtener la lista completa de seguidores\r\n          await this.fetchFollowers();\r\n        }\r\n\r\n        // Cantidad de publicaciones\r\n        const res = await apiClient.get(`/posts/count/${user.id}`);\r\n        this.countPosts = res.data.post_count;\r\n      } catch (error) {\r\n        console.error(\"Error al obtener el usuario:\", error.response?.data || error);\r\n        alert(\"Error al obtener los datos del usuario.\");\r\n      }\r\n    },\r\n\r\n    async fetchFollowers() {\r\n      try {\r\n        const token = localStorage.getItem(\"authToken\");\r\n        const resFollowers = await apiClient.get(`/follow/followers/${this.userData.id}`, {\r\n          headers: { Authorization: `Bearer ${token}` },\r\n        });\r\n        this.follows.followers = resFollowers.data || [];\r\n        this.follows.followers_count = this.follows.followers.length;\r\n        // Para cada seguidor se consulta si el usuario logueado ya lo sigue\r\n        for (let follower of this.follows.followers) {\r\n          // Si el seguidor es el usuario actual, no se consulta el endpoint\r\n          if (follower.id.toString() === this.currentUserId) {\r\n            this.$set(follower, \"isFollowed\", false);\r\n            continue;\r\n          }\r\n          try {\r\n            // Se asume que el endpoint /follow/check acepta currentUserId como parámetro\r\n            const resCheck = await apiClient.get(`/follow/check/${follower.id}`, {\r\n              headers: { Authorization: `Bearer ${token}` },\r\n              params: { currentUserId: this.currentUserId }\r\n            });\r\n            const followed = resCheck.data.isFollowing === true || resCheck.data.isFollowing === 1;\r\n            follower.isFollowed = followed;\r\n          } catch (error) {\r\n            this.$set(follower, \"isFollowed\", false);\r\n            this.$set(follower, \"isFollowed\", followed);\r\n\r\n          }\r\n        }\r\n      } catch (error) {\r\n        console.error(\"Error al obtener los seguidores:\", error.response?.data || error);\r\n      }\r\n    },\r\n\r\n    async toggleFollowerFollow(followerId) {\r\n      const token = localStorage.getItem(\"authToken\");\r\n      // Se localiza el seguidor en la lista\r\n      const follower = this.follows.followers.find(f => f.id === followerId);\r\n      if (!follower) return;\r\n      try {\r\n        if (follower.isFollowed) {\r\n          // Desfollow\r\n          await apiClient.delete(`/follow/${followerId}`, {\r\n            headers: { Authorization: `Bearer ${token}` },\r\n            data: { followed_id: followerId },\r\n          });\r\n          follower.isFollowed = false;\r\n        } else {\r\n          // Follow\r\n          await apiClient.post(`/follow`, { followed_id: followerId }, { headers: { Authorization: `Bearer ${token}` } });\r\n          follower.isFollowed = true;\r\n        }\r\n      } catch (error) {\r\n        console.error(\"Error al cambiar el estado de seguimiento:\", error);\r\n      }\r\n    },\r\n\r\n    getUserImage() {\r\n      return (\r\n        this.userData.profile_picture ||\r\n        \"https://firebasestorage.googleapis.com/v0/b/booksharing-socialnetwork.appspot.com/o/profile%2Fdefault.jpg?alt=media\"\r\n      );\r\n    },\r\n    logout() {\r\n      logoutUser(this.$router);\r\n    },\r\n    goToEditProfile() {\r\n      this.$router.push(`/profile/${this.userData.username}/edit-account`);\r\n    },\r\n    editPost(post) {\r\n      // Redirige a la vista de edición del post del usuario\r\n      this.$router.push(`/posts/${post.id}/edit-post`);\r\n    },\r\n    async deletePost(post) {\r\n      if (confirm(\"¿Estás seguro de que deseas eliminar esta publicación?\")) {\r\n        try {\r\n          const token = localStorage.getItem(\"authToken\");\r\n          await apiClient.delete(`/posts/${post.id}`, {\r\n            headers: { Authorization: `Bearer ${token}` },\r\n          });\r\n          // Recarga las publicaciones después de eliminar\r\n          this.fetchPosts();\r\n          alert(\"Publicación eliminada correctamente\");\r\n        } catch (error) {\r\n          alert(\"Error al eliminar la publicación\");\r\n          console.error(error);\r\n        }\r\n      }\r\n    },\r\n    async toggleFollow() {\r\n      try {\r\n        const token = localStorage.getItem(\"authToken\");\r\n        const userId = this.userData.id;\r\n        const action = this.follows.isFollowing ? \"unfollow\" : \"follow\";\r\n\r\n        if (action === \"follow\") {\r\n          await apiClient.post(\r\n            `/follow`,\r\n            { followed_id: userId },\r\n            {\r\n              headers: {\r\n                Authorization: `Bearer ${token}`,\r\n              },\r\n            }\r\n          );\r\n          this.follows.isFollowing = true;\r\n        } else {\r\n          await apiClient.delete(`/follow/${userId}`, {\r\n            headers: { Authorization: `Bearer ${token}` },\r\n            data: { followed_id: userId }, // algunos clientes requieren esto, pero tu backend solo usa el param\r\n          });\r\n          this.follows.isFollowing = false;\r\n        }\r\n        // Actualiza la lista de seguidores\r\n        await this.fetchFollowers();\r\n      } catch (error) {\r\n        console.error(\"Error al seguir/dejar de seguir:\", error);\r\n      }\r\n    },\r\n  },\r\n\r\n  beforeMount() {\r\n    this.fetchUser();\r\n  },\r\n};\r\n</script>\r\n<style>\r\n.library-grid {\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));\r\n  gap: 2rem;\r\n  margin-bottom: 2rem;\r\n}\r\n\r\n.library-item .card {\r\n  height: 100%;\r\n  max-width: 250px;\r\n  margin: 0 auto;\r\n}\r\n\r\n.card-img-top {\r\n  height: 300px;\r\n  object-fit: cover;\r\n}\r\n</style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
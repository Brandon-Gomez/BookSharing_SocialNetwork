{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, resolveComponent as _resolveComponent, createVNode as _createVNode, toDisplayString as _toDisplayString, withCtx as _withCtx } from \"vue\";\nconst _hoisted_1 = {\n  class: \"container pb-5 mb-2 mb-md-4\"\n};\nconst _hoisted_2 = {\n  class: \"pt-5 mt-md-2\"\n};\nconst _hoisted_3 = {\n  class: \"library-grid\"\n};\nconst _hoisted_4 = {\n  class: \"card\"\n};\nconst _hoisted_5 = {\n  class: \"card-body\"\n};\nconst _hoisted_6 = {\n  class: \"h6 blog-entry-title\"\n};\nconst _hoisted_7 = {\n  href: \"#\"\n};\nconst _hoisted_8 = {\n  class: \"btn-tag me-2 mb-2\",\n  href: \"#\"\n};\nconst _hoisted_9 = {\n  class: \"card-footer d-flex align-items-center fs-xs\"\n};\nconst _hoisted_10 = {\n  class: \"ms-auto text-nowrap\"\n};\nconst _hoisted_11 = {\n  class: \"blog-entry-meta-link text-nowrap\",\n  href: \"#\"\n};\nconst _hoisted_12 = {\n  class: \"blog-entry-meta-link text-nowrap\",\n  href: \"blog-single.html#comments\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_RouterLink = _resolveComponent(\"RouterLink\");\n  const _component_Pagination = _resolveComponent(\"Pagination\");\n  const _component_MainLayout = _resolveComponent(\"MainLayout\");\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createCommentVNode(\"\\r\\nDATA\\r\\nposts\\r\\n: \\r\\nArray(20)\\r\\n0\\r\\n: \\r\\ncategory_description\\r\\n: \\r\\n\\\"Historias futuristas o especulativas con elementos tecnológicos o espaciales.\\\"\\r\\ncategory_id\\r\\n: \\r\\n17\\r\\ncategory_name\\r\\n: \\r\\n\\\"Ciencia ficción\\\"\\r\\ncreated_at\\r\\n: \\r\\n\\\"2025-01-28T05:00:00.000Z\\\"\\r\\ndescription\\r\\n: \\r\\n\\\"Una aventura épica en tierras desconocidas.\\\"\\r\\nimage\\r\\n: \\r\\nnull\\r\\npdf_file\\r\\n: \\r\\nnull\\r\\npost_id\\r\\n: \\r\\n7\\r\\ntitle\\r\\n: \\r\\n\\\"Amor en tiempos difíciles\\\"\\r\\ntotal_likes\\r\\n: \\r\\n\\\"0\\\"\\r\\nupdated_at\\r\\n: \\r\\n\\\"2025-01-28T05:00:00.000Z\\\"\\r\\nuser_id\\r\\n: \\r\\n443\\r\\nusername\\r\\n: \\r\\n\\\"user443\\\"\\r\\nviews\\r\\n: \\r\\n68 \"), _createVNode(_component_MainLayout, null, {\n    default: _withCtx(() => [_cache[5] || (_cache[5] = _createElementVNode(\"div\", {\n      class: \"bg-secondary py-4\"\n    }, [_createElementVNode(\"div\", {\n      class: \"container d-lg-flex justify-content-between py-2 py-lg-3\"\n    }, [_createElementVNode(\"div\", {\n      class: \"order-lg-2 mb-3 mb-lg-0 pt-lg-2\"\n    }, [_createElementVNode(\"nav\", {\n      \"aria-label\": \"breadcrumb\"\n    }, [_createElementVNode(\"ol\", {\n      class: \"breadcrumb flex-lg-nowrap justify-content-center justify-content-lg-start\",\n      style: {\n        \"background-color\": \"unset\"\n      }\n    }, [_createElementVNode(\"li\", {\n      class: \"breadcrumb-item\"\n    }, [_createElementVNode(\"a\", {\n      class: \"text-nowrap\",\n      href: \"index.html\"\n    }, [_createElementVNode(\"i\", {\n      class: \"ci-home\"\n    }), _createTextVNode(\"Home\")])]), _createElementVNode(\"li\", {\n      class: \"breadcrumb-item text-nowrap\"\n    }, [_createElementVNode(\"a\", {\n      href: \"#\"\n    }, \"Blog\")]), _createElementVNode(\"li\", {\n      class: \"breadcrumb-item text-nowrap active\",\n      \"aria-current\": \"page\"\n    }, \"Grid no sidebar\")])])]), _createElementVNode(\"div\", {\n      class: \"order-lg-1 pe-lg-4 text-center text-lg-start\"\n    }, [_createElementVNode(\"h1\", {\n      class: \"h3 mb-0\"\n    }, \"Explora\")])])], -1 /* HOISTED */)), _createElementVNode(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createCommentVNode(\" Nuevo grid de artículos \"), _createElementVNode(\"div\", _hoisted_3, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.posts, post => {\n      return _openBlock(), _createElementBlock(\"article\", {\n        class: \"library-item\",\n        key: post.post_id\n      }, [_createElementVNode(\"div\", _hoisted_4, [_createVNode(_component_RouterLink, {\n        to: _ctx.to\n      }, null, 8 /* PROPS */, [\"to\"]), _cache[3] || (_cache[3] = _createTextVNode(\"> \")), _cache[4] || (_cache[4] = _createElementVNode(\"a\", {\n        class: \"blog-entry-thumb\",\n        href: \"#\"\n      }, [_createElementVNode(\"img\", {\n        class: \"card-img-top\",\n        src: \"https://tunovela.es/wp-content/uploads/Cien-anos-de-soledad-de-Gabriel-Garcia-Marquez-resumen-y-analisis.jpg\",\n        alt: \"Post\"\n      })], -1 /* HOISTED */)), _createElementVNode(\"div\", _hoisted_5, [_createElementVNode(\"h2\", _hoisted_6, [_createElementVNode(\"a\", _hoisted_7, _toDisplayString(post.title), 1 /* TEXT */)]), _createElementVNode(\"a\", _hoisted_8, _toDisplayString(post.category_name), 1 /* TEXT */)]), _createElementVNode(\"div\", _hoisted_9, [_createVNode(_component_RouterLink, {\n        class: \"blog-entry-meta-link\",\n        to: `/profile/${post.username}`\n      }, {\n        default: _withCtx(() => [_createTextVNode(_toDisplayString(post.username), 1 /* TEXT */)]),\n        _: 2 /* DYNAMIC */\n      }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"to\"]), _createElementVNode(\"div\", _hoisted_10, [_createElementVNode(\"a\", _hoisted_11, _toDisplayString(new Date(post.created_at).toLocaleString('en-US', {\n        month: 'short',\n        day: '2-digit'\n      })), 1 /* TEXT */), _cache[2] || (_cache[2] = _createElementVNode(\"span\", {\n        class: \"blog-entry-meta-divider mx-2\"\n      }, null, -1 /* HOISTED */)), _createElementVNode(\"a\", _hoisted_12, [_cache[1] || (_cache[1] = _createElementVNode(\"i\", {\n        class: \"ci-heart\"\n      }, null, -1 /* HOISTED */)), _createTextVNode(_toDisplayString(post.total_likes), 1 /* TEXT */)])])])])]);\n    }), 128 /* KEYED_FRAGMENT */))]), _createCommentVNode(\" Pagination\"), _createVNode(_component_Pagination, {\n      modelValue: $data.page,\n      \"onUpdate:modelValue\": [_cache[0] || (_cache[0] = $event => $data.page = $event), $options.onPageChange],\n      totalPages: $data.totalPages\n    }, null, 8 /* PROPS */, [\"modelValue\", \"totalPages\", \"onUpdate:modelValue\"])])])]),\n    _: 1 /* STABLE */\n  })], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */);\n}","map":{"version":3,"names":["class","href","_createElementBlock","_Fragment","_createCommentVNode","_createVNode","_component_MainLayout","default","_withCtx","_createElementVNode","style","_createTextVNode","_hoisted_1","_hoisted_2","_hoisted_3","_renderList","$data","posts","post","key","post_id","_hoisted_4","_component_RouterLink","to","_ctx","src","alt","_hoisted_5","_hoisted_6","_hoisted_7","_toDisplayString","title","_hoisted_8","category_name","_hoisted_9","username","_","_hoisted_10","_hoisted_11","Date","created_at","toLocaleString","month","day","_hoisted_12","total_likes","_component_Pagination","modelValue","page","$event","$options","onPageChange","totalPages"],"sources":["D:\\Downloads\\BookSharing_SocialNetwork\\fronvue\\src\\components\\home_component.vue"],"sourcesContent":["<template>\r\n\r\n\r\n  <!--\r\nDATA\r\nposts\r\n: \r\nArray(20)\r\n0\r\n: \r\ncategory_description\r\n: \r\n\"Historias futuristas o especulativas con elementos tecnológicos o espaciales.\"\r\ncategory_id\r\n: \r\n17\r\ncategory_name\r\n: \r\n\"Ciencia ficción\"\r\ncreated_at\r\n: \r\n\"2025-01-28T05:00:00.000Z\"\r\ndescription\r\n: \r\n\"Una aventura épica en tierras desconocidas.\"\r\nimage\r\n: \r\nnull\r\npdf_file\r\n: \r\nnull\r\npost_id\r\n: \r\n7\r\ntitle\r\n: \r\n\"Amor en tiempos difíciles\"\r\ntotal_likes\r\n: \r\n\"0\"\r\nupdated_at\r\n: \r\n\"2025-01-28T05:00:00.000Z\"\r\nuser_id\r\n: \r\n443\r\nusername\r\n: \r\n\"user443\"\r\nviews\r\n: \r\n68 -->\r\n\r\n\r\n  <MainLayout>\r\n\r\n    <div class=\"bg-secondary py-4\">\r\n      <div class=\"container d-lg-flex justify-content-between py-2 py-lg-3\">\r\n        <div class=\"order-lg-2 mb-3 mb-lg-0 pt-lg-2\">\r\n          <nav aria-label=\"breadcrumb\">\r\n            <ol class=\"breadcrumb flex-lg-nowrap justify-content-center justify-content-lg-start\"\r\n              style=\"background-color: unset;\">\r\n              <li class=\"breadcrumb-item\"><a class=\"text-nowrap\" href=\"index.html\"><i class=\"ci-home\"></i>Home</a></li>\r\n              <li class=\"breadcrumb-item text-nowrap\"><a href=\"#\">Blog</a>\r\n              </li>\r\n              <li class=\"breadcrumb-item text-nowrap active\" aria-current=\"page\">Grid no sidebar</li>\r\n            </ol>\r\n          </nav>\r\n        </div>\r\n        <div class=\"order-lg-1 pe-lg-4 text-center text-lg-start\">\r\n          <h1 class=\"h3 mb-0\">Explora</h1>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"container pb-5 mb-2 mb-md-4\">\r\n      <div class=\"pt-5 mt-md-2\">\r\n        <!-- Nuevo grid de artículos -->\r\n        <div class=\"library-grid\">\r\n          <article class=\"library-item\" v-for=\"(post) in posts\" :key=\"post.post_id\">\r\n            <div class=\"card\">\r\n\r\n              <RouterLink :to></RouterLink>>\r\n\r\n              <a class=\"blog-entry-thumb\" href=\"#\">\r\n                <img class=\"card-img-top\"\r\n                  src=\"https://tunovela.es/wp-content/uploads/Cien-anos-de-soledad-de-Gabriel-Garcia-Marquez-resumen-y-analisis.jpg\"\r\n                  alt=\"Post\">\r\n              </a>\r\n              <div class=\"card-body\">\r\n                <h2 class=\"h6 blog-entry-title\">\r\n                  <a href=\"#\">\r\n\r\n                    {{ post.title }}\r\n\r\n                  </a>\r\n                </h2>\r\n                <a class=\" btn-tag me-2 mb-2\" href=\"#\">{{ post.category_name }}</a>\r\n              </div>\r\n              <div class=\"card-footer d-flex align-items-center fs-xs\">\r\n                <RouterLink class=\"blog-entry-meta-link\" :to=\"`/profile/${post.username}`\">\r\n                  {{ post.username }}\r\n                </RouterLink>\r\n                <div class=\"ms-auto text-nowrap\">\r\n                  <a class=\"blog-entry-meta-link text-nowrap\" href=\"#\">\r\n                    {{ new Date(post.created_at).toLocaleString('en-US', { month: 'short', day: '2-digit' }) }}\r\n                  </a>\r\n                  <span class=\"blog-entry-meta-divider mx-2\"></span>\r\n                  <a class=\"blog-entry-meta-link text-nowrap\" href=\"blog-single.html#comments\">\r\n                    <i class=\"ci-heart\"></i>{{ post.total_likes }}\r\n                  </a>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </article>\r\n        </div>\r\n        <!-- Pagination-->\r\n        <Pagination v-model=\"page\" :totalPages=\"totalPages\" @update:modelValue=\"onPageChange\" />\r\n\r\n      </div>\r\n    </div>\r\n\r\n  </MainLayout>\r\n</template>\r\n\r\n<script>\r\nimport apiClient from \"@/services/ApiService\";\r\nimport MainLayout from \"@/layouts/MainLayout.vue\";\r\nimport Pagination from \"@/components/pagination_component.vue\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      isAuth: true,\r\n      posts: [],\r\n      page: 1,\r\n      limit: 15,\r\n      totalPages: 0\r\n    };\r\n  },\r\n  components: {\r\n    MainLayout,\r\n    Pagination\r\n\r\n  },\r\n  methods: {\r\n\r\n    async getPostsPaginated() {\r\n      try {\r\n        const token = localStorage.getItem(\"authToken\");\r\n        if (!token) {\r\n          this.isAuth = false;\r\n          return;\r\n        }\r\n        const response = await apiClient.get(`/posts?page=${this.page}&limit=${this.limit}`, {\r\n          headers: {\r\n            Authorization: `Bearer ${token}`,\r\n          },\r\n        });\r\n        console.log(\"Response data:\", response.data);\r\n        this.posts = response.data.posts;\r\n        this.totalPages = response.data.totalPages;\r\n      } catch (error) {\r\n        // redirect to login if token is invalid\r\n        if (error.response && error.response.data.message === \"Token is invalid\") {\r\n          this.isAuth = false;\r\n          localStorage.removeItem(\"authToken\");\r\n          this.$router.push({ name: \"login\" });\r\n        } else {\r\n          console.error(\"Error fetching posts:\", error);\r\n        }\r\n      }\r\n    },\r\n    onPageChange(n) {\r\n      this.page = n;\r\n      this.getPostsPaginated();\r\n    },\r\n  },\r\n\r\n  mounted() {\r\n    this.getPostsPaginated();\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.library-grid {\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));\r\n  gap: 2rem;\r\n  margin-bottom: 2rem;\r\n}\r\n\r\n.library-item .card {\r\n  height: 100%;\r\n  max-width: 250px;\r\n  margin: 0 auto;\r\n}\r\n\r\n.card-img-top {\r\n  height: 300px;\r\n  object-fit: cover;\r\n}\r\n</style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"import pdfjsLib from 'pdfjs-dist';\nexport default {\n  props: {\n    pdfUrl: {\n      type: String,\n      required: true\n    },\n    isPdfModalOpen: {\n      type: Boolean,\n      required: true\n    }\n  },\n  watch: {\n    pdfUrl(newUrl) {\n      if (newUrl && this.isPdfModalOpen) {\n        this.loadPdf(newUrl);\n      }\n    }\n  },\n  mounted() {\n    if (this.pdfUrl && this.isPdfModalOpen) {\n      this.loadPdf(this.pdfUrl);\n    }\n  },\n  methods: {\n    loadPdf(pdfUrl) {\n      const canvas = this.$refs.pdfCanvas;\n      const context = canvas.getContext('2d');\n      pdfjsLib.getDocument(pdfUrl).promise.then(pdf => {\n        pdf.getPage(1).then(page => {\n          const viewport = page.getViewport({\n            scale: 1.5\n          });\n          canvas.height = viewport.height;\n          canvas.width = viewport.width;\n          page.render({\n            canvasContext: context,\n            viewport: viewport\n          });\n        });\n      });\n    },\n    closePdfModal() {\n      this.$emit('close');\n    }\n  }\n};","map":{"version":3,"names":["pdfjsLib","props","pdfUrl","type","String","required","isPdfModalOpen","Boolean","watch","newUrl","loadPdf","mounted","methods","canvas","$refs","pdfCanvas","context","getContext","getDocument","promise","then","pdf","getPage","page","viewport","getViewport","scale","height","width","render","canvasContext","closePdfModal","$emit"],"sources":["C:\\DATA\\POW\\BookSharing_SocialNetwork\\fronvue\\src\\components\\pdfpreview_component.vue"],"sourcesContent":["<template>\r\n    <div v-if=\"isPdfModalOpen\" class=\"modal fade show\" tabindex=\"-1\" aria-labelledby=\"pdfModalLabel\" aria-hidden=\"true\" style=\"display: block;\">\r\n      <div class=\"modal-dialog modal-lg\">\r\n        <div class=\"modal-content\">\r\n          <div class=\"modal-header\">\r\n            <h5 class=\"modal-title\" id=\"pdfModalLabel\">Previsualizaci√≥n del libro</h5>\r\n            <button type=\"button\" class=\"btn-close\" @click=\"closePdfModal\" aria-label=\"Close\"></button>\r\n          </div>\r\n          <div class=\"modal-body\">\r\n            <div id=\"pdf-preview-container\" style=\"height: 500px;\">\r\n              <canvas ref=\"pdfCanvas\"></canvas>\r\n            </div>\r\n          </div>\r\n          <div class=\"modal-footer\">\r\n            <a :href=\"pdfUrl\" download class=\"btn btn-success\">Descargar PDF</a>\r\n            <button type=\"button\" class=\"btn btn-secondary\" @click=\"closePdfModal\">Cerrar</button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </template>\r\n  \r\n  <script>\r\n  import pdfjsLib from 'pdfjs-dist';\r\n  \r\n  export default {\r\n    props: {\r\n      pdfUrl: {\r\n        type: String,\r\n        required: true,\r\n      },\r\n      isPdfModalOpen: {\r\n        type: Boolean,\r\n        required: true,\r\n      },\r\n    },\r\n    watch: {\r\n      pdfUrl(newUrl) {\r\n        if (newUrl && this.isPdfModalOpen) {\r\n          this.loadPdf(newUrl);\r\n        }\r\n      },\r\n    },\r\n    mounted() {\r\n      if (this.pdfUrl && this.isPdfModalOpen) {\r\n        this.loadPdf(this.pdfUrl);\r\n      }\r\n    },\r\n    methods: {\r\n      loadPdf(pdfUrl) {\r\n        const canvas = this.$refs.pdfCanvas;\r\n        const context = canvas.getContext('2d');\r\n        pdfjsLib.getDocument(pdfUrl).promise.then((pdf) => {\r\n          pdf.getPage(1).then((page) => {\r\n            const viewport = page.getViewport({ scale: 1.5 });\r\n            canvas.height = viewport.height;\r\n            canvas.width = viewport.width;\r\n  \r\n            page.render({\r\n              canvasContext: context,\r\n              viewport: viewport,\r\n            });\r\n          });\r\n        });\r\n      },\r\n      closePdfModal() {\r\n        this.$emit('close');\r\n      },\r\n    },\r\n  };\r\n  </script>\r\n  \r\n  <style scoped>\r\n  /* Estilos para el modal */\r\n  .modal-backdrop {\r\n    z-index: 1040;\r\n  }\r\n  </style>\r\n  "],"mappings":"AAuBE,OAAOA,QAAO,MAAO,YAAY;AAEjC,eAAe;EACbC,KAAK,EAAE;IACLC,MAAM,EAAE;MACNC,IAAI,EAAEC,MAAM;MACZC,QAAQ,EAAE;IACZ,CAAC;IACDC,cAAc,EAAE;MACdH,IAAI,EAAEI,OAAO;MACbF,QAAQ,EAAE;IACZ;EACF,CAAC;EACDG,KAAK,EAAE;IACLN,MAAMA,CAACO,MAAM,EAAE;MACb,IAAIA,MAAK,IAAK,IAAI,CAACH,cAAc,EAAE;QACjC,IAAI,CAACI,OAAO,CAACD,MAAM,CAAC;MACtB;IACF;EACF,CAAC;EACDE,OAAOA,CAAA,EAAG;IACR,IAAI,IAAI,CAACT,MAAK,IAAK,IAAI,CAACI,cAAc,EAAE;MACtC,IAAI,CAACI,OAAO,CAAC,IAAI,CAACR,MAAM,CAAC;IAC3B;EACF,CAAC;EACDU,OAAO,EAAE;IACPF,OAAOA,CAACR,MAAM,EAAE;MACd,MAAMW,MAAK,GAAI,IAAI,CAACC,KAAK,CAACC,SAAS;MACnC,MAAMC,OAAM,GAAIH,MAAM,CAACI,UAAU,CAAC,IAAI,CAAC;MACvCjB,QAAQ,CAACkB,WAAW,CAAChB,MAAM,CAAC,CAACiB,OAAO,CAACC,IAAI,CAAEC,GAAG,IAAK;QACjDA,GAAG,CAACC,OAAO,CAAC,CAAC,CAAC,CAACF,IAAI,CAAEG,IAAI,IAAK;UAC5B,MAAMC,QAAO,GAAID,IAAI,CAACE,WAAW,CAAC;YAAEC,KAAK,EAAE;UAAI,CAAC,CAAC;UACjDb,MAAM,CAACc,MAAK,GAAIH,QAAQ,CAACG,MAAM;UAC/Bd,MAAM,CAACe,KAAI,GAAIJ,QAAQ,CAACI,KAAK;UAE7BL,IAAI,CAACM,MAAM,CAAC;YACVC,aAAa,EAAEd,OAAO;YACtBQ,QAAQ,EAAEA;UACZ,CAAC,CAAC;QACJ,CAAC,CAAC;MACJ,CAAC,CAAC;IACJ,CAAC;IACDO,aAAaA,CAAA,EAAG;MACd,IAAI,CAACC,KAAK,CAAC,OAAO,CAAC;IACrB;EACF;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"import { createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, vModelSelect as _vModelSelect, createCommentVNode as _createCommentVNode, withModifiers as _withModifiers } from \"vue\";\nconst _hoisted_1 = {\n  class: \"container-fluid mt-4\"\n};\nconst _hoisted_2 = {\n  class: \"w-50\"\n};\nconst _hoisted_3 = {\n  class: \"form-group mb-3\"\n};\nconst _hoisted_4 = {\n  class: \"form-group mb-3\"\n};\nconst _hoisted_5 = {\n  class: \"form-group mb-3\"\n};\nconst _hoisted_6 = [\"value\"];\nconst _hoisted_7 = {\n  class: \"form-group mb-3\"\n};\nconst _hoisted_8 = {\n  key: 0\n};\nconst _hoisted_9 = [\"src\"];\nconst _hoisted_10 = {\n  class: \"form-group mb-3\"\n};\nconst _hoisted_11 = {\n  key: 0\n};\nconst _hoisted_12 = [\"href\"];\nconst _hoisted_13 = {\n  key: 1\n};\nexport function render(_ctx, _cache) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_cache[15] || (_cache[15] = _createElementVNode(\"h2\", null, \"Editar Publicación\", -1 /* HOISTED */)), _ctx.postData ? (_openBlock(), _createElementBlock(\"form\", {\n    key: 0,\n    onSubmit: _cache[6] || (_cache[6] = _withModifiers((...args) => _ctx.updatePost && _ctx.updatePost(...args), [\"prevent\"])),\n    class: \"my-4\"\n  }, [_createElementVNode(\"div\", _hoisted_3, [_cache[7] || (_cache[7] = _createElementVNode(\"label\", {\n    for: \"title\"\n  }, \"Título\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    id: \"title\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => _ctx.postData.title = $event),\n    class: \"form-control\",\n    required: \"\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, _ctx.postData.title]])]), _createElementVNode(\"div\", _hoisted_4, [_cache[8] || (_cache[8] = _createElementVNode(\"label\", {\n    for: \"description\"\n  }, \"Descripción\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"textarea\", {\n    id: \"description\",\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => _ctx.postData.description = $event),\n    class: \"form-control\",\n    required: \"\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, _ctx.postData.description]])]), _createElementVNode(\"div\", _hoisted_5, [_cache[10] || (_cache[10] = _createElementVNode(\"label\", {\n    for: \"category\"\n  }, \"Categoría\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"select\", {\n    id: \"category\",\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => _ctx.postData.category_id = $event),\n    class: \"form-control\",\n    required: \"\"\n  }, [_cache[9] || (_cache[9] = _createElementVNode(\"option\", {\n    value: \"\",\n    disabled: \"\"\n  }, \"Selecciona una categoría\", -1 /* HOISTED */)), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.categories, cat => {\n    return _openBlock(), _createElementBlock(\"option\", {\n      key: cat.id,\n      value: cat.id\n    }, _toDisplayString(cat.name), 9 /* TEXT, PROPS */, _hoisted_6);\n  }), 128 /* KEYED_FRAGMENT */))], 512 /* NEED_PATCH */), [[_vModelSelect, _ctx.postData.category_id]])]), _createElementVNode(\"div\", _hoisted_7, [_cache[11] || (_cache[11] = _createElementVNode(\"label\", {\n    for: \"image\"\n  }, \"Imagen actual\", -1 /* HOISTED */)), _ctx.postData.image ? (_openBlock(), _createElementBlock(\"div\", _hoisted_8, [_createElementVNode(\"img\", {\n    src: _ctx.postData.image,\n    alt: \"Imagen actual\",\n    class: \"img-thumbnail mb-2\",\n    style: {\n      \"max-width\": \"200px\"\n    }\n  }, null, 8 /* PROPS */, _hoisted_9)])) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"input\", {\n    type: \"file\",\n    id: \"image\",\n    onChange: _cache[3] || (_cache[3] = (...args) => _ctx.onImageChange && _ctx.onImageChange(...args)),\n    class: \"form-control\",\n    accept: \"image/*\"\n  }, null, 32 /* NEED_HYDRATION */)]), _createElementVNode(\"div\", _hoisted_10, [_cache[12] || (_cache[12] = _createElementVNode(\"label\", {\n    for: \"pdf\"\n  }, \"Archivo PDF actual\", -1 /* HOISTED */)), _ctx.postData.pdf_file ? (_openBlock(), _createElementBlock(\"div\", _hoisted_11, [_createElementVNode(\"a\", {\n    href: _ctx.postData.pdf_file,\n    target: \"_blank\"\n  }, \"Ver PDF\", 8 /* PROPS */, _hoisted_12)])) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"input\", {\n    type: \"file\",\n    id: \"pdf\",\n    onChange: _cache[4] || (_cache[4] = (...args) => _ctx.onPdfChange && _ctx.onPdfChange(...args)),\n    class: \"form-control\",\n    accept: \"application/pdf\"\n  }, null, 32 /* NEED_HYDRATION */)]), _cache[13] || (_cache[13] = _createElementVNode(\"button\", {\n    type: \"submit\",\n    class: \"btn btn-primary\"\n  }, \"Guardar Cambios\", -1 /* HOISTED */)), _createElementVNode(\"button\", {\n    type: \"button\",\n    class: \"btn btn-secondary ml-3\",\n    onClick: _cache[5] || (_cache[5] = (...args) => _ctx.cancel && _ctx.cancel(...args))\n  }, \"Cancelar\")], 32 /* NEED_HYDRATION */)) : (_openBlock(), _createElementBlock(\"div\", _hoisted_13, _cache[14] || (_cache[14] = [_createElementVNode(\"p\", null, \"Cargando publicación...\", -1 /* HOISTED */)])))])]);\n}","map":{"version":3,"names":["class","key","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_ctx","postData","onSubmit","_cache","_withModifiers","args","updatePost","_hoisted_3","for","type","id","$event","title","required","_hoisted_4","description","_hoisted_5","category_id","value","disabled","_Fragment","_renderList","categories","cat","name","_hoisted_6","_hoisted_7","image","_hoisted_8","src","alt","style","_hoisted_9","_createCommentVNode","onChange","onImageChange","accept","_hoisted_10","pdf_file","_hoisted_11","href","target","_hoisted_12","onPdfChange","onClick","cancel","_hoisted_13"],"sources":["D:\\Downloads\\BookSharing_SocialNetwork\\fronvue\\src\\components\\admin\\post-edit_component.vue"],"sourcesContent":["<template>\r\n    <div class=\"container-fluid mt-4\">\r\n        <div class=\"w-50\">\r\n            <h2>Editar Publicación</h2>\r\n            <form @submit.prevent=\"updatePost\" class=\"my-4\" v-if=\"postData\">\r\n                <div class=\"form-group mb-3\">\r\n                    <label for=\"title\">Título</label>\r\n                    <input type=\"text\" id=\"title\" v-model=\"postData.title\" class=\"form-control\" required />\r\n                </div>\r\n                <div class=\"form-group mb-3\">\r\n                    <label for=\"description\">Descripción</label>\r\n                    <textarea id=\"description\" v-model=\"postData.description\" class=\"form-control\" required></textarea>\r\n                </div>\r\n                <div class=\"form-group mb-3\">\r\n                    <label for=\"category\">Categoría</label>\r\n                    <select id=\"category\" v-model=\"postData.category_id\" class=\"form-control\" required>\r\n                        <option value=\"\" disabled>Selecciona una categoría</option>\r\n                        <option v-for=\"cat in categories\" :key=\"cat.id\" :value=\"cat.id\">{{ cat.name }}</option>\r\n                    </select>\r\n                </div>\r\n                <div class=\"form-group mb-3\">\r\n                    <label for=\"image\">Imagen actual</label>\r\n                    <div v-if=\"postData.image\">\r\n                        <img :src=\"postData.image\" alt=\"Imagen actual\" class=\"img-thumbnail mb-2\"\r\n                            style=\"max-width: 200px;\" />\r\n                    </div>\r\n                    <input type=\"file\" id=\"image\" @change=\"onImageChange\" class=\"form-control\" accept=\"image/*\" />\r\n                </div>\r\n                <div class=\"form-group mb-3\">\r\n                    <label for=\"pdf\">Archivo PDF actual</label>\r\n                    <div v-if=\"postData.pdf_file\">\r\n                        <a :href=\"postData.pdf_file\" target=\"_blank\">Ver PDF</a>\r\n                    </div>\r\n                    <input type=\"file\" id=\"pdf\" @change=\"onPdfChange\" class=\"form-control\" accept=\"application/pdf\" />\r\n                </div>\r\n                <button type=\"submit\" class=\"btn btn-primary\">Guardar Cambios</button>\r\n                <button type=\"button\" class=\"btn btn-secondary ml-3\" @click=\"cancel\">Cancelar</button>\r\n            </form>\r\n            <div v-else>\r\n                <p>Cargando publicación...</p>\r\n            </div>\r\n        </div>\r\n\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport apiClient from \"@/services/ApiService\";\r\nimport eventBus from \"@/eventBus.js\";\r\n\r\nexport default {\r\n    data() {\r\n        return {\r\n            postData: null,\r\n            image: null,\r\n            pdf: null,\r\n             <div class=\"form-group mb-3\">\r\n                <label for=\"category\">Categoría</label>\r\n                <select id=\"category\" v-model=\"postData.category_id\" class=\"form-control\" required>\r\n                    <option value=\"\" disabled>Selecciona una categoría</option>\r\n                    <option v-for=\"cat in categories\" :key=\"cat.id\" :value=\"cat.id\">{{ cat.name }}</option>\r\n                </select>\r\n            </div>\r\n        };\r\n    },\r\n    methods: {\r\n        async fetchPost() {\r\n            try {\r\n                const token = localStorage.getItem(\"authToken\");\r\n                const postId = this.$route.params.postId;\r\n                const response = await apiClient.get(`/posts/${postId}`, {\r\n                    headers: { Authorization: `Bearer ${token}` }\r\n                });\r\n                this.postData = response.data;\r\n            } catch (error) {\r\n                console.error(\"Error al obtener la publicación:\", error.response?.data || error);\r\n                alert(\"Error al obtener la publicación.\");\r\n            }\r\n        },\r\n        onImageChange(event) {\r\n            this.image = event.target.files[0];\r\n        },\r\n        onPdfChange(event) {\r\n            this.pdf = event.target.files[0];\r\n        },\r\n        async updatePost() {\r\n            try {\r\n                const token = localStorage.getItem(\"authToken\");\r\n                const postId = this.$route.params.postId;\r\n                const formData = new FormData();\r\n                formData.append(\"title\", this.postData.title);\r\n                formData.append(\"description\", this.postData.description);\r\n                if (this.image) formData.append(\"images\", this.image);\r\n                if (this.pdf) formData.append(\"pdf\", this.pdf);\r\n\r\n                await apiClient.put(`/posts/${postId}`, formData, {\r\n                    headers: {\r\n                        Authorization: `Bearer ${token}`,\r\n                        \"Content-Type\": \"multipart/form-data\"\r\n                    }\r\n                });\r\n                this.$router.push({\r\n                    path: \"/admin/posts-list\",\r\n                    query: { alert: \"Publicación actualizada exitosamente\", type: \"success\" }\r\n                });\r\n            } catch (error) {\r\n                // Muestra la alerta en la misma vista si falla\r\n                eventBus.emit('alert', { message: \"Error al actualizar la publicación.\", type: \"danger\" });\r\n                console.error(\"Error al actualizar la publicación:\", error.response?.data || error);\r\n            }\r\n        },\r\n        cancel() {\r\n            this.$router.push(\"/admin/posts-list\");\r\n        }\r\n    },\r\n    mounted() {\r\n        this.fetchPost();\r\n    }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.container {\r\n    max-width: 600px;\r\n}\r\n</style>"],"mappings":";;EACSA,KAAK,EAAC;AAAsB;;EACxBA,KAAK,EAAC;AAAM;;EAGJA,KAAK,EAAC;AAAiB;;EAIvBA,KAAK,EAAC;AAAiB;;EAIvBA,KAAK,EAAC;AAAiB;mBAb5C;;EAoBqBA,KAAK,EAAC;AAAiB;;EApB5CC,GAAA;AAAA;mBAAA;;EA4BqBD,KAAK,EAAC;AAAiB;;EA5B5CC,GAAA;AAAA;oBAAA;;EAAAA,GAAA;AAAA;;uBACIC,mBAAA,CA0CM,OA1CNC,UA0CM,GAzCFC,mBAAA,CAuCM,OAvCNC,UAuCM,G,4BAtCFD,mBAAA,CAA2B,YAAvB,oBAAkB,sBACgCE,IAAA,CAAAC,QAAQ,I,cAA9DL,mBAAA,CAiCO;IArCnBD,GAAA;IAImBO,QAAM,EAAAC,MAAA,QAAAA,MAAA,MAJzBC,cAAA,KAAAC,IAAA,KAImCL,IAAA,CAAAM,UAAA,IAAAN,IAAA,CAAAM,UAAA,IAAAD,IAAA,CAAU;IAAEX,KAAK,EAAC;MACrCI,mBAAA,CAGM,OAHNS,UAGM,G,0BAFFT,mBAAA,CAAiC;IAA1BU,GAAG,EAAC;EAAO,GAAC,QAAM,sB,gBACzBV,mBAAA,CAAuF;IAAhFW,IAAI,EAAC,MAAM;IAACC,EAAE,EAAC,OAAO;IAPjD,uBAAAP,MAAA,QAAAA,MAAA,MAAAQ,MAAA,IAO2DX,IAAA,CAAAC,QAAQ,CAACW,KAAK,GAAAD,MAAA;IAAEjB,KAAK,EAAC,cAAc;IAACmB,QAAQ,EAAR;iDAArCb,IAAA,CAAAC,QAAQ,CAACW,KAAK,E,KAEzDd,mBAAA,CAGM,OAHNgB,UAGM,G,0BAFFhB,mBAAA,CAA4C;IAArCU,GAAG,EAAC;EAAa,GAAC,aAAW,sB,gBACpCV,mBAAA,CAAmG;IAAzFY,EAAE,EAAC,aAAa;IAX9C,uBAAAP,MAAA,QAAAA,MAAA,MAAAQ,MAAA,IAWwDX,IAAA,CAAAC,QAAQ,CAACc,WAAW,GAAAJ,MAAA;IAAEjB,KAAK,EAAC,cAAc;IAACmB,QAAQ,EAAR;iDAA3Cb,IAAA,CAAAC,QAAQ,CAACc,WAAW,E,KAE5DjB,mBAAA,CAMM,OANNkB,UAMM,G,4BALFlB,mBAAA,CAAuC;IAAhCU,GAAG,EAAC;EAAU,GAAC,WAAS,sB,gBAC/BV,mBAAA,CAGS;IAHDY,EAAE,EAAC,UAAU;IAfzC,uBAAAP,MAAA,QAAAA,MAAA,MAAAQ,MAAA,IAemDX,IAAA,CAAAC,QAAQ,CAACgB,WAAW,GAAAN,MAAA;IAAEjB,KAAK,EAAC,cAAc;IAACmB,QAAQ,EAAR;gCACtEf,mBAAA,CAA2D;IAAnDoB,KAAK,EAAC,EAAE;IAACC,QAAQ,EAAR;KAAS,0BAAwB,uB,kBAClDvB,mBAAA,CAAuFwB,SAAA,QAjB/GC,WAAA,CAiB8CrB,IAAA,CAAAsB,UAAU,EAAjBC,GAAG;yBAAlB3B,mBAAA,CAAuF;MAApDD,GAAG,EAAE4B,GAAG,CAACb,EAAE;MAAGQ,KAAK,EAAEK,GAAG,CAACb;wBAAOa,GAAG,CAACC,IAAI,wBAjBnGC,UAAA;2EAemDzB,IAAA,CAAAC,QAAQ,CAACgB,WAAW,E,KAKvDnB,mBAAA,CAOM,OAPN4B,UAOM,G,4BANF5B,mBAAA,CAAwC;IAAjCU,GAAG,EAAC;EAAO,GAAC,eAAa,sBACrBR,IAAA,CAAAC,QAAQ,CAAC0B,KAAK,I,cAAzB/B,mBAAA,CAGM,OAzB1BgC,UAAA,GAuBwB9B,mBAAA,CACgC;IAD1B+B,GAAG,EAAE7B,IAAA,CAAAC,QAAQ,CAAC0B,KAAK;IAAEG,GAAG,EAAC,eAAe;IAACpC,KAAK,EAAC,oBAAoB;IACrEqC,KAAyB,EAAzB;MAAA;IAAA;0BAxB5BC,UAAA,E,KAAAC,mBAAA,gBA0BoBnC,mBAAA,CAA8F;IAAvFW,IAAI,EAAC,MAAM;IAACC,EAAE,EAAC,OAAO;IAAEwB,QAAM,EAAA/B,MAAA,QAAAA,MAAA,UAAAE,IAAA,KAAEL,IAAA,CAAAmC,aAAA,IAAAnC,IAAA,CAAAmC,aAAA,IAAA9B,IAAA,CAAa;IAAEX,KAAK,EAAC,cAAc;IAAC0C,MAAM,EAAC;uCAEtFtC,mBAAA,CAMM,OANNuC,WAMM,G,4BALFvC,mBAAA,CAA2C;IAApCU,GAAG,EAAC;EAAK,GAAC,oBAAkB,sBACxBR,IAAA,CAAAC,QAAQ,CAACqC,QAAQ,I,cAA5B1C,mBAAA,CAEM,OAhC1B2C,WAAA,GA+BwBzC,mBAAA,CAAwD;IAApD0C,IAAI,EAAExC,IAAA,CAAAC,QAAQ,CAACqC,QAAQ;IAAEG,MAAM,EAAC;KAAS,SAAO,iBA/B5EC,WAAA,E,KAAAT,mBAAA,gBAiCoBnC,mBAAA,CAAkG;IAA3FW,IAAI,EAAC,MAAM;IAACC,EAAE,EAAC,KAAK;IAAEwB,QAAM,EAAA/B,MAAA,QAAAA,MAAA,UAAAE,IAAA,KAAEL,IAAA,CAAA2C,WAAA,IAAA3C,IAAA,CAAA2C,WAAA,IAAAtC,IAAA,CAAW;IAAEX,KAAK,EAAC,cAAc;IAAC0C,MAAM,EAAC;mEAElFtC,mBAAA,CAAsE;IAA9DW,IAAI,EAAC,QAAQ;IAACf,KAAK,EAAC;KAAkB,iBAAe,sBAC7DI,mBAAA,CAAsF;IAA9EW,IAAI,EAAC,QAAQ;IAACf,KAAK,EAAC,wBAAwB;IAAEkD,OAAK,EAAAzC,MAAA,QAAAA,MAAA,UAAAE,IAAA,KAAEL,IAAA,CAAA6C,MAAA,IAAA7C,IAAA,CAAA6C,MAAA,IAAAxC,IAAA,CAAM;KAAE,UAAQ,E,6CAEjFT,mBAAA,CAEM,OAxClBkD,WAAA,EAAA3C,MAAA,SAAAA,MAAA,QAuCgBL,mBAAA,CAA8B,WAA3B,yBAAuB,oB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"import { toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode } from \"vue\";\nconst _hoisted_1 = {\n  class: \"follow-component\"\n};\nconst _hoisted_2 = {\n  key: 0,\n  class: \"error\"\n};\nconst _hoisted_3 = {\n  class: \"user-actions\"\n};\nconst _hoisted_4 = {\n  class: \"follow-info\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [$data.error ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, _toDisplayString($data.error), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"div\", _hoisted_3, [!$data.isFollowing ? (_openBlock(), _createElementBlock(\"button\", {\n    key: 0,\n    onClick: _cache[0] || (_cache[0] = (...args) => $options.followUser && $options.followUser(...args)),\n    class: \"btn btn-primary\"\n  }, \" Seguir \")) : (_openBlock(), _createElementBlock(\"button\", {\n    key: 1,\n    onClick: _cache[1] || (_cache[1] = (...args) => $options.unfollowUser && $options.unfollowUser(...args)),\n    class: \"btn btn-secondary\"\n  }, \" Dejar de seguir \"))]), _createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"p\", null, [_cache[2] || (_cache[2] = _createElementVNode(\"strong\", null, \"Seguidores:\", -1 /* HOISTED */)), _createTextVNode(\" \" + _toDisplayString($data.followerCount), 1 /* TEXT */)]), _createElementVNode(\"p\", null, [_cache[3] || (_cache[3] = _createElementVNode(\"strong\", null, \"Seguidos:\", -1 /* HOISTED */)), _createTextVNode(\" \" + _toDisplayString($data.followingCount), 1 /* TEXT */)])])]);\n}","map":{"version":3,"names":["class","key","_createElementBlock","_hoisted_1","$data","error","_hoisted_2","_toDisplayString","_createCommentVNode","_createElementVNode","_hoisted_3","isFollowing","onClick","_cache","args","$options","followUser","unfollowUser","_hoisted_4","_createTextVNode","followerCount","followingCount"],"sources":["C:\\DATA\\POW\\BookSharing_SocialNetwork\\fronvue\\src\\components\\follow_component.vue"],"sourcesContent":["<template>\r\n  <div class=\"follow-component\">\r\n    <div v-if=\"error\" class=\"error\">{{ error }}</div>\r\n    <div class=\"user-actions\">\r\n      <button v-if=\"!isFollowing\" @click=\"followUser\" class=\"btn btn-primary\">\r\n        Seguir\r\n      </button>\r\n      <button v-else @click=\"unfollowUser\" class=\"btn btn-secondary\">\r\n        Dejar de seguir\r\n      </button>\r\n    </div>\r\n\r\n    <div class=\"follow-info\">\r\n      <p><strong>Seguidores:</strong> {{ followerCount }}</p>\r\n      <p><strong>Seguidos:</strong> {{ followingCount }}</p>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport ApiService from \"@/services/ApiService\";\r\n\r\nexport default {\r\n  props: {\r\n    userId: {\r\n      type: String,\r\n      required: true,\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      isFollowing: false,\r\n      followerCount: 0,\r\n      followingCount: 0,\r\n      error: null,\r\n    };\r\n  },\r\n  methods: {\r\n    async followUser() {\r\n      try {\r\n        const response = await ApiService.post(\"/follow\", { followed_id: this.userId });\r\n        this.isFollowing = true;\r\n        this.fetchFollowCounts();\r\n        console.log(response.message);\r\n      } catch (error) {\r\n        this.error = error.response?.data?.message || \"Error al seguir al usuario.\";\r\n      }\r\n    },\r\n    async unfollowUser() {\r\n      try {\r\n        const response = await ApiService.delete(\"/unfollow\", { data: { followed_id: this.userId } });\r\n        this.isFollowing = false;\r\n        this.fetchFollowCounts();\r\n        console.log(response.message);\r\n      } catch (error) {\r\n        this.error = error.response?.data?.message || \"Error al dejar de seguir al usuario.\";\r\n      }\r\n    },\r\n    async fetchFollowCounts() {\r\n      try {\r\n        const followerResponse = await ApiService.get(`/followers/${this.userId}/count`);\r\n        const followingResponse = await ApiService.get(`/following/${this.userId}/count`);\r\n        this.followerCount = followerResponse.followerCount;\r\n        this.followingCount = followingResponse.followingCount;\r\n      } catch (error) {\r\n        this.error = \"Error al obtener la informaciÃ³n de seguimiento.\";\r\n      }\r\n    },\r\n    async checkIfFollowing() {\r\n      try {\r\n        const following = await ApiService.get(`/is-following/${this.userId}`);\r\n        this.isFollowing = following.some((user) => user.id === this.$store.state.authUser.id);\r\n      } catch (error) {\r\n        this.error = \"Error al verificar el estado de seguimiento.\";\r\n      }\r\n    },\r\n  },\r\n  async mounted() {\r\n    await this.fetchFollowCounts();\r\n    await this.checkIfFollowing();\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.follow-component {\r\n  text-align: center;\r\n}\r\n.error {\r\n  color: red;\r\n  margin-bottom: 1rem;\r\n}\r\n.btn {\r\n  margin: 0.5rem;\r\n}\r\n</style>\r\n"],"mappings":";;EACOA,KAAK,EAAC;AAAkB;;EAD/BC,GAAA;EAEsBD,KAAK,EAAC;;;EACnBA,KAAK,EAAC;AAAc;;EASpBA,KAAK,EAAC;AAAa;;uBAX1BE,mBAAA,CAeM,OAfNC,UAeM,GAdOC,KAAA,CAAAC,KAAK,I,cAAhBH,mBAAA,CAAiD,OAAjDI,UAAiD,EAAAC,gBAAA,CAAdH,KAAA,CAAAC,KAAK,oBAF5CG,mBAAA,gBAGIC,mBAAA,CAOM,OAPNC,UAOM,G,CANWN,KAAA,CAAAO,WAAW,I,cAA1BT,mBAAA,CAES;IANfD,GAAA;IAImCW,OAAK,EAAAC,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAEC,QAAA,CAAAC,UAAA,IAAAD,QAAA,CAAAC,UAAA,IAAAF,IAAA,CAAU;IAAEd,KAAK,EAAC;KAAkB,UAExE,M,cACAE,mBAAA,CAES;IATfD,GAAA;IAOsBW,OAAK,EAAAC,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAEC,QAAA,CAAAE,YAAA,IAAAF,QAAA,CAAAE,YAAA,IAAAH,IAAA,CAAY;IAAEd,KAAK,EAAC;KAAoB,mBAE/D,G,GAGFS,mBAAA,CAGM,OAHNS,UAGM,GAFJT,mBAAA,CAAuD,Y,0BAApDA,mBAAA,CAA4B,gBAApB,aAAW,sBAb5BU,gBAAA,CAaqC,GAAC,GAAAZ,gBAAA,CAAGH,KAAA,CAAAgB,aAAa,iB,GAChDX,mBAAA,CAAsD,Y,0BAAnDA,mBAAA,CAA0B,gBAAlB,WAAS,sBAd1BU,gBAAA,CAcmC,GAAC,GAAAZ,gBAAA,CAAGH,KAAA,CAAAiB,cAAc,iB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
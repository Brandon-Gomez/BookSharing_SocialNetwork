{"ast":null,"code":"import { createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, vModelSelect as _vModelSelect, withModifiers as _withModifiers, createTextVNode as _createTextVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"container-fluid mt-4\"\n};\nconst _hoisted_2 = {\n  class: \"form-group mb-3\"\n};\nconst _hoisted_3 = {\n  class: \"form-group mb-3\"\n};\nconst _hoisted_4 = {\n  class: \"form-group mb-3\"\n};\nconst _hoisted_5 = {\n  class: \"form-group mb-3\"\n};\nconst _hoisted_6 = {\n  class: \"form-group mb-3\"\n};\nconst _hoisted_7 = {\n  class: \"form-group mb-3\"\n};\nconst _hoisted_8 = {\n  class: \"form-group mb-3\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_cache[19] || (_cache[19] = _createTextVNode(\" div \")), _cache[20] || (_cache[20] = _createElementVNode(\"h2\", null, \"Editar Usuario\", -1 /* HOISTED */)), _createElementVNode(\"form\", {\n    onSubmit: _cache[9] || (_cache[9] = _withModifiers((...args) => $options.updateUser && $options.updateUser(...args), [\"prevent\"])),\n    class: \"mt-4\"\n  }, [_createElementVNode(\"div\", _hoisted_2, [_cache[10] || (_cache[10] = _createElementVNode(\"label\", {\n    for: \"email\"\n  }, \"Correo Electrónico\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"input\", {\n    type: \"email\",\n    id: \"email\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.userData.email = $event),\n    class: \"form-control\",\n    placeholder: \"Correo electrónico\",\n    required: \"\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.userData.email]])]), _createElementVNode(\"div\", _hoisted_3, [_cache[11] || (_cache[11] = _createElementVNode(\"label\", {\n    for: \"password\"\n  }, \"Contraseña (dejar vacío para no cambiar)\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"input\", {\n    type: \"password\",\n    id: \"password\",\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.userData.password = $event),\n    class: \"form-control\",\n    placeholder: \"Contraseña\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.userData.password]])]), _createElementVNode(\"div\", _hoisted_4, [_cache[12] || (_cache[12] = _createElementVNode(\"label\", {\n    for: \"username\"\n  }, \"Nombre de Usuario\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    id: \"username\",\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $data.userData.username = $event),\n    class: \"form-control\",\n    placeholder: \"Nombre de usuario\",\n    required: \"\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.userData.username]])]), _createElementVNode(\"div\", _hoisted_5, [_cache[13] || (_cache[13] = _createElementVNode(\"label\", {\n    for: \"name\"\n  }, \"Nombre\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    id: \"name\",\n    \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => $data.userData.name = $event),\n    class: \"form-control\",\n    placeholder: \"Nombre completo\",\n    required: \"\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.userData.name]])]), _createElementVNode(\"div\", _hoisted_6, [_cache[14] || (_cache[14] = _createElementVNode(\"label\", {\n    for: \"birthdate\"\n  }, \"Fecha de Nacimiento\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"input\", {\n    type: \"date\",\n    id: \"birthdate\",\n    \"onUpdate:modelValue\": _cache[4] || (_cache[4] = $event => $data.userData.birthdate = $event),\n    class: \"form-control\",\n    placeholder: \"Fecha de nacimiento\",\n    required: \"\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.userData.birthdate]])]), _createElementVNode(\"div\", _hoisted_7, [_cache[15] || (_cache[15] = _createElementVNode(\"label\", {\n    for: \"description\"\n  }, \"Descripción\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"textarea\", {\n    id: \"description\",\n    \"onUpdate:modelValue\": _cache[5] || (_cache[5] = $event => $data.userData.description = $event),\n    class: \"form-control\",\n    placeholder: \"Descripción\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.userData.description]])]), _createElementVNode(\"div\", _hoisted_8, [_cache[17] || (_cache[17] = _createElementVNode(\"label\", {\n    for: \"is_admin\"\n  }, \"Rol\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"select\", {\n    id: \"is_admin\",\n    \"onUpdate:modelValue\": _cache[6] || (_cache[6] = $event => $data.userData.is_admin = $event),\n    class: \"form-control\",\n    onSelect: _cache[7] || (_cache[7] = (...args) => $data.userData.is_admin && $data.userData.is_admin(...args))\n  }, _cache[16] || (_cache[16] = [_createElementVNode(\"option\", {\n    value: false\n  }, \"Usuario\", -1 /* HOISTED */), _createElementVNode(\"option\", {\n    value: true\n  }, \"Administrador\", -1 /* HOISTED */)]), 544 /* NEED_HYDRATION, NEED_PATCH */), [[_vModelSelect, $data.userData.is_admin]])]), _cache[18] || (_cache[18] = _createElementVNode(\"button\", {\n    type: \"submit\",\n    class: \"btn btn-primary\"\n  }, \"Actualizar Usuario\", -1 /* HOISTED */)), _createElementVNode(\"button\", {\n    type: \"button\",\n    class: \"btn btn-secondary ml-3\",\n    onClick: _cache[8] || (_cache[8] = (...args) => $options.cancel && $options.cancel(...args))\n  }, \" Cancelar \")], 32 /* NEED_HYDRATION */)]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createTextVNode","_createElementVNode","onSubmit","_cache","_withModifiers","args","$options","updateUser","_hoisted_2","for","type","id","$event","$data","userData","email","placeholder","required","_hoisted_3","password","_hoisted_4","username","_hoisted_5","name","_hoisted_6","birthdate","_hoisted_7","description","_hoisted_8","is_admin","onSelect","value","onClick","cancel"],"sources":["D:\\Downloads\\BookSharing_SocialNetwork\\fronvue\\src\\components\\admin\\user-edit_component.vue"],"sourcesContent":["<template>\r\n    <div class=\"container-fluid mt-4\">\r\n        div\r\n        <h2>Editar Usuario</h2>\r\n        <form @submit.prevent=\"updateUser\" class=\"mt-4\">\r\n            <div class=\"form-group mb-3\">\r\n                <label for=\"email\">Correo Electrónico</label>\r\n                <input type=\"email\" id=\"email\" v-model=\"userData.email\" class=\"form-control\"\r\n                    placeholder=\"Correo electrónico\" required />\r\n            </div>\r\n            <div class=\"form-group mb-3\">\r\n                <label for=\"password\">Contraseña (dejar vacío para no cambiar)</label>\r\n                <input type=\"password\" id=\"password\" v-model=\"userData.password\" class=\"form-control\"\r\n                    placeholder=\"Contraseña\" />\r\n            </div>\r\n            <div class=\"form-group mb-3\">\r\n                <label for=\"username\">Nombre de Usuario</label>\r\n                <input type=\"text\" id=\"username\" v-model=\"userData.username\" class=\"form-control\"\r\n                    placeholder=\"Nombre de usuario\" required />\r\n            </div>\r\n            <div class=\"form-group mb-3\">\r\n                <label for=\"name\">Nombre</label>\r\n                <input type=\"text\" id=\"name\" v-model=\"userData.name\" class=\"form-control\" placeholder=\"Nombre completo\"\r\n                    required />\r\n            </div>\r\n            <div class=\"form-group mb-3\">\r\n                <label for=\"birthdate\">Fecha de Nacimiento</label>\r\n                <input type=\"date\" id=\"birthdate\" v-model=\"userData.birthdate\" class=\"form-control\"\r\n                    placeholder=\"Fecha de nacimiento\" required />\r\n            </div>\r\n            <div class=\"form-group mb-3\">\r\n                <label for=\"description\">Descripción</label>\r\n                <textarea id=\"description\" v-model=\"userData.description\" class=\"form-control\"\r\n                    placeholder=\"Descripción\"></textarea>\r\n            </div>\r\n            <div class=\"form-group mb-3\">\r\n                <label for=\"is_admin\">Rol</label>\r\n                <select id=\"is_admin\" v-model=\"userData.is_admin\" class=\"form-control\" v-on:select=\"userData.is_admin\">\r\n                    <option :value=\"false\">Usuario</option>\r\n                    <option :value=\"true\">Administrador</option>\r\n                </select>\r\n            </div>\r\n            <button type=\"submit\" class=\"btn btn-primary\">Actualizar Usuario</button>\r\n            <button type=\"button\" class=\"btn btn-secondary ml-3\" @click=\"cancel\">\r\n                Cancelar\r\n            </button>\r\n        </form>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport apiClient from \"@/services/ApiService\";\r\n\r\nexport default {\r\n    data() {\r\n        return {\r\n            userData: {\r\n                email: \"\",\r\n                password: \"\",\r\n                username: \"\",\r\n                name: \"\",\r\n                birthdate: \"\",\r\n                description: \"\",\r\n                is_admin: \"\",\r\n            },\r\n        };\r\n    },\r\n    async mounted() {\r\n        await this.fetchUser();\r\n    },\r\n    methods: {\r\n        async fetchUser() {\r\n            try {\r\n                const token = localStorage.getItem(\"authToken\");\r\n                const userId = this.$route.params.userId;\r\n                const response = await apiClient.get(`/users/${userId}`, {\r\n                    headers: {\r\n                        Authorization: `Bearer ${token}`\r\n                    }\r\n                });\r\n                let user = response.data.user;\r\n                // Formatea la fecha para el input date\r\n                if (user.birthdate) {\r\n                    user.birthdate = user.birthdate.split('T')[0];\r\n                }\r\n                this.userData = {\r\n                    ...user,\r\n                    password: \"\"\r\n                };\r\n            } catch (error) {\r\n                console.error(\"Error al obtener el usuario:\", error.response?.data || error);\r\n                alert(\"Error al obtener los datos del usuario.\");\r\n            }\r\n        },\r\n        async updateUser() {\r\n            try {\r\n                const token = localStorage.getItem(\"authToken\");\r\n                const userId = this.$route.params.userId;\r\n                // Si el campo password está vacío, no lo envíes\r\n                const dataToSend = { ...this.userData };\r\n                if (!dataToSend.password) delete dataToSend.password;\r\n\r\n                await apiClient.put(\r\n                    `/users/${userId}`,\r\n                    dataToSend,\r\n                    {\r\n                        headers: {\r\n                            Authorization: `Bearer ${token}`\r\n                        }\r\n                    }\r\n                );\r\n\r\n                this.$router.push({\r\n                    path: \"/admin/users-list\",\r\n                    query: { alert: \"Usuario actualizado exitosamente\", type: \"success\" }\r\n                });\r\n            } catch (error) {\r\n                // Manejo de errores\r\n                this.$router.push({\r\n                    path: \"/admin/users-list\",\r\n                    query: { alert: \"Error al actualizar el usuario\", type: \"danger\" }\r\n                });\r\n            }\r\n        },\r\n        cancel() {\r\n            this.$router.push(\"/admin/users-list\");\r\n        },\r\n    },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.container {\r\n    max-width: 600px;\r\n}\r\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
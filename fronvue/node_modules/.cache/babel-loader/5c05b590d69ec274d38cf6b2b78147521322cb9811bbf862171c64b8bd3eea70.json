{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport apiClient from './ApiService';\nconst loginUser = async ({\n  email,\n  password,\n  router\n}) => {\n  try {\n    const response = await apiClient.post('/login', {\n      email,\n      password\n    });\n    const username = response.data.username;\n    const is_admin = response.data.is_admin;\n    localStorage.setItem('authToken', response.data.token);\n    localStorage.setItem('isAdmin', is_admin);\n    localStorage.setItem('username', username);\n    localStorage.setItem('userData', JSON.stringify(response.data.userData));\n    if (is_admin) {\n      router.push(`/admin/dashboard`).then(() => window.location.reload());\n    } else {\n      router.push(`/profile/${username}`).then(() => window.location.reload());\n    }\n  } catch (error) {\n    console.error('Error en el login:', error.response);\n    throw error;\n  }\n};\nconst logoutUser = router => {\n  localStorage.removeItem('authToken');\n  localStorage.removeItem('isAdmin');\n  localStorage.removeItem('username');\n  localStorage.removeItem('userData');\n  router.push('/').then(() => window.location.reload());\n};\n\n// googleAuth\nconst googleAuth = async ({\n  email,\n  name,\n  imageUrl,\n  router\n}) => {\n  try {\n    const response = await apiClient.post('/googleAuth', {\n      email,\n      name,\n      imageUrl\n    });\n    const username = response.data.username;\n    const is_admin = response.data.is_admin;\n    localStorage.setItem('authToken', response.data.token);\n    localStorage.setItem('isAdmin', is_admin);\n    localStorage.setItem('username', username);\n    localStorage.setItem('userData', JSON.stringify(response.data.userData));\n    if (is_admin) {\n      router.push(`/admin/dashboard`).then(() => window.location.reload());\n    } else {\n      router.push(`/profile/${username}`).then(() => window.location.reload());\n    }\n  } catch (error) {\n    console.error('Error en la autenticación de Google:', error.response);\n    throw error;\n  }\n};\n\n// check if user is logged in\nconst isLoggedIn = () => {\n  return !!localStorage.getItem('authToken');\n};\nexport { loginUser, logoutUser, googleAuth };","map":{"version":3,"names":["apiClient","loginUser","email","password","router","response","post","username","data","is_admin","localStorage","setItem","token","JSON","stringify","userData","push","then","window","location","reload","error","console","logoutUser","removeItem","googleAuth","name","imageUrl","isLoggedIn","getItem"],"sources":["D:/Downloads/BookSharing_SocialNetwork/fronvue/src/services/useAuth.js"],"sourcesContent":["import apiClient from './ApiService';\r\nconst loginUser = async ({ email, password, router }) => {\r\n  try {\r\n    const response = await apiClient.post('/login', { email, password });\r\n    const username = response.data.username;\r\n    const is_admin = response.data.is_admin;\r\n\r\n    localStorage.setItem('authToken', response.data.token);\r\n    localStorage.setItem('isAdmin', is_admin);\r\n    localStorage.setItem('username', username);\r\n    localStorage.setItem('userData', JSON.stringify(response.data.userData));\r\n    if (is_admin) {\r\n      router.push(`/admin/dashboard`).then(() => window.location.reload());\r\n    } else {\r\n      router.push(`/profile/${username}`).then(() => window.location.reload());\r\n    }\r\n  } catch (error) {\r\n    console.error('Error en el login:', error.response);\r\n    throw error;\r\n  }\r\n};\r\n\r\nconst logoutUser = (router) => {\r\n  localStorage.removeItem('authToken');\r\n  localStorage.removeItem('isAdmin');\r\n  localStorage.removeItem('username');\r\n  localStorage.removeItem('userData');\r\n  router.push('/').then(() => window.location.reload());\r\n};\r\n\r\n// googleAuth\r\nconst googleAuth = async ({ email, name, imageUrl, router }) => {\r\n  try {\r\n    const response = await apiClient.post('/googleAuth', { email, name, imageUrl });\r\n    const username = response.data.username;\r\n    const is_admin = response.data.is_admin;\r\n\r\n    localStorage.setItem('authToken', response.data.token);\r\n    localStorage.setItem('isAdmin', is_admin);\r\n    localStorage.setItem('username', username);\r\n    localStorage.setItem('userData', JSON.stringify(response.data.userData));\r\n    if (is_admin) {\r\n      router.push(`/admin/dashboard`).then(() => window.location.reload());\r\n    } else {\r\n      router.push(`/profile/${username}`).then(() => window.location.reload());\r\n    }\r\n  } catch (error) {\r\n    console.error('Error en la autenticación de Google:', error.response);\r\n    throw error;\r\n  }\r\n};\r\n\r\n// check if user is logged in\r\nconst isLoggedIn = () => {\r\n  return !!localStorage.getItem('authToken');\r\n};\r\n\r\nexport { loginUser, logoutUser, googleAuth };"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
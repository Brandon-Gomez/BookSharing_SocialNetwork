{"ast":null,"code":"import Chart from 'chart.js';\nimport apiClient from '@/services/ApiService';\nexport default {\n  data() {\n    return {\n      total_users: 0,\n      per_books_read: 0,\n      total_posts: 0,\n      books_per_month: []\n    };\n  },\n  async mounted() {\n    // total_posts: '3', per_books_read: 66.66666666666666, total_users: '2'}\n    try {\n      const token = localStorage.getItem('authToken');\n      if (token) {\n        const response = await apiClient.get('/admin/dashboard', {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        console.log(response.data);\n        this.total_posts = response.data.total_posts;\n        this.per_books_read = Math.round(response.data.per_books_read * 100) / 100;\n        this.total_users = response.data.total_users;\n        this.books_per_month = response.data.posts_per_month;\n      }\n    } catch (error) {\n      console.error('Error:', error);\n    }\n\n    // Gráfico de líneas: Libros compartidos por mes (solo año actual)\n    const areaCtx = document.getElementById('myAreaChart');\n    if (areaCtx) {\n      // Etiquetas y datos\n      const labels = books_per_month.map(item => item.month.trim());\n      const data = books_per_month.map(item => parseInt(item.total, 10));\n      new Chart(areaCtx, {\n        type: 'line',\n        data: {\n          labels: labels,\n          datasets: [{\n            label: 'Libros compartidos',\n            data: data,\n            backgroundColor: 'rgba(54, 185, 204, 0.1)',\n            borderColor: '#36b9cc',\n            borderWidth: 2,\n            pointBackgroundColor: '#36b9cc'\n          }]\n        },\n        options: {\n          responsive: true,\n          title: {\n            display: true,\n            text: 'Libros compartidos por mes (Año actual)'\n          }\n        }\n      });\n    }\n\n    // Gráfico de pastel: Distribución de usuarios por actividad\n    const pieCtx = document.getElementById('myPieChart');\n    if (pieCtx) {\n      new Chart(pieCtx, {\n        type: 'pie',\n        data: {\n          labels: ['Solo comparten', 'Solo leen', 'Comparten y leen'],\n          datasets: [{\n            data: [25, 40, 35],\n            backgroundColor: ['#4e73df', '#1cc88a', '#f6c23e']\n          }]\n        },\n        options: {\n          responsive: true,\n          title: {\n            display: true,\n            text: 'Distribución de usuarios por actividad'\n          }\n        }\n      });\n    }\n  }\n};","map":{"version":3,"names":["Chart","apiClient","data","total_users","per_books_read","total_posts","books_per_month","mounted","token","localStorage","getItem","response","get","headers","Authorization","console","log","Math","round","posts_per_month","error","areaCtx","document","getElementById","labels","map","item","month","trim","parseInt","total","type","datasets","label","backgroundColor","borderColor","borderWidth","pointBackgroundColor","options","responsive","title","display","text","pieCtx"],"sources":["D:\\Downloads\\BookSharing_SocialNetwork\\fronvue\\src\\components\\admin\\dashboard_component.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <!-- Begin Page Content -->\r\n    <div class=\"container-fluid\">\r\n      <!-- Page Heading -->\r\n      <div class=\"d-sm-flex align-items-center justify-content-between mb-4\">\r\n        <h1 class=\"h3 mb-0 text-gray-800\">Dashboard</h1>\r\n        <a href=\"#\" class=\"d-none d-sm-inline-block btn btn-sm btn-primary shadow-sm\"><i\r\n            class=\"fas fa-download fa-sm text-white-50\"></i> Generate\r\n          Report</a>\r\n      </div>\r\n\r\n      <!-- Content Row -->\r\n      <div class=\"row\">\r\n        <!-- Earnings (Monthly) Card Example -->\r\n        <div class=\"col-xl-3 col-md-6 mb-4\">\r\n          <div class=\"card border-left-primary shadow h-100 py-2\">\r\n            <div class=\"card-body\">\r\n              <div class=\"row no-gutters align-items-center\">\r\n                <div class=\"col mr-2\">\r\n                  <div class=\"text-xs font-weight-bold text-primary text-uppercase mb-1\">\r\n                    Total Libros Compartidos\r\n                  </div>\r\n                  <div class=\"h5 mb-0 font-weight-bold text-gray-800\">\r\n                    {{ total_posts }}\r\n                  </div>\r\n                </div>\r\n                <div class=\"col-auto\">\r\n                  <i class=\"fas fa-book fa-2x text-gray-300\"></i>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- Earnings (Monthly) Card Example -->\r\n        <div class=\"col-xl-3 col-md-6 mb-4\">\r\n          <div class=\"card border-left-success shadow h-100 py-2\">\r\n            <div class=\"card-body\">\r\n              <div class=\"row no-gutters align-items-center\">\r\n                <div class=\"col mr-2\">\r\n                  <div class=\"text-xs font-weight-bold text-success text-uppercase mb-1\">\r\n                    Total Usuarios\r\n                  </div>\r\n                  <div class=\"h5 mb-0 font-weight-bold text-gray-800\">\r\n                    {{ total_users }}\r\n                  </div>\r\n                </div>\r\n                <div class=\"col-auto\">\r\n                  <i class=\"fas fa-users fa-2x text-gray-300\"></i>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- Earnings (Monthly) Card Example -->\r\n        <div class=\"col-xl-3 col-md-6 mb-4\">\r\n          <div class=\"card border-left-info shadow h-100 py-2\">\r\n            <div class=\"card-body\">\r\n              <div class=\"row no-gutters align-items-center\">\r\n                <div class=\"col mr-2\">\r\n                  <div class=\"text-xs font-weight-bold text-info text-uppercase mb-1\">\r\n                    Porcentaje Libros Leídos\r\n                  </div>\r\n                  <div class=\"row no-gutters align-items-center\">\r\n                    <div class=\"col-auto\">\r\n                      <div class=\"h5 mb-0 mr-3 font-weight-bold text-gray-800\">\r\n                        {{ per_books_read }}%\r\n                      </div>\r\n                    </div>\r\n                    <div class=\"col\">\r\n                      <div class=\"progress progress-sm mr-2\">\r\n                        <div class=\"progress-bar bg-info\" role=\"progressbar\" :style=\"{ width: per_books_read + '%' }\"\r\n                          aria-valuenow=\"50\" aria-valuemin=\"0\" aria-valuemax=\"100\"></div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div class=\"col-auto\">\r\n                  <i class=\"fas fa-clipboard-list fa-2x text-gray-300\"></i>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- Pending Requests Card Example -->\r\n        <div class=\"col-xl-3 col-md-6 mb-4\">\r\n          <div class=\"card border-left-warning shadow h-100 py-2\">\r\n            <div class=\"card-body\">\r\n              <div class=\"row no-gutters align-items-center\">\r\n                <div class=\"col mr-2\">\r\n                  <div class=\"text-xs font-weight-bold text-warning text-uppercase mb-1\">\r\n                    Total Comments\r\n                  </div>\r\n                  <div class=\"h5 mb-0 font-weight-bold text-gray-800\">\r\n                    18\r\n                  </div>\r\n                </div>\r\n                <div class=\"col-auto\">\r\n                  <i class=\"fas fa-comments fa-2x text-gray-300\"></i>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Content Row -->\r\n\r\n      <div class=\"row\">\r\n        <!-- Area Chart -->\r\n        <div class=\"col-xl-8 col-lg-7\">\r\n          <div class=\"card shadow mb-4\">\r\n            <!-- Card Header - Dropdown -->\r\n            <div class=\"card-header py-3 d-flex flex-row align-items-center justify-content-between\">\r\n              <h6 class=\"m-0 font-weight-bold text-primary\">\r\n                Libros Compartidos por Mes\r\n              </h6>\r\n              <div class=\"dropdown no-arrow\">\r\n                <a class=\"dropdown-toggle\" href=\"#\" role=\"button\" id=\"dropdownMenuLink\" data-toggle=\"dropdown\"\r\n                  aria-haspopup=\"true\" aria-expanded=\"false\">\r\n                  <i class=\"fas fa-ellipsis-v fa-sm fa-fw text-gray-400\"></i>\r\n                </a>\r\n                <div class=\"dropdown-menu dropdown-menu-right shadow animated--fade-in\"\r\n                  aria-labelledby=\"dropdownMenuLink\">\r\n                  <div class=\"dropdown-header\">Dropdown Header:</div>\r\n                  <a class=\"dropdown-item\" href=\"#\">Action</a>\r\n                  <a class=\"dropdown-item\" href=\"#\">Another action</a>\r\n                  <div class=\"dropdown-divider\"></div>\r\n                  <a class=\"dropdown-item\" href=\"#\">Something else here</a>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <!-- Card Body -->\r\n            <div class=\"card-body\">\r\n              <div class=\"chart-area\">\r\n                <canvas id=\"myAreaChart\"></canvas>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- Pie Chart -->\r\n        <div class=\"col-xl-4 col-lg-5\">\r\n          <div class=\"card shadow mb-4\">\r\n            <!-- Card Header - Dropdown -->\r\n            <div class=\"card-header py-3 d-flex flex-row align-items-center justify-content-between\">\r\n              <h6 class=\"m-0 font-weight-bold text-primary\">\r\n                Revenue Sources\r\n              </h6>\r\n              <div class=\"dropdown no-arrow\">\r\n                <a class=\"dropdown-toggle\" href=\"#\" role=\"button\" id=\"dropdownMenuLink\" data-toggle=\"dropdown\"\r\n                  aria-haspopup=\"true\" aria-expanded=\"false\">\r\n                  <i class=\"fas fa-ellipsis-v fa-sm fa-fw text-gray-400\"></i>\r\n                </a>\r\n                <div class=\"dropdown-menu dropdown-menu-right shadow animated--fade-in\"\r\n                  aria-labelledby=\"dropdownMenuLink\">\r\n                  <div class=\"dropdown-header\">Dropdown Header:</div>\r\n                  <a class=\"dropdown-item\" href=\"#\">Action</a>\r\n                  <a class=\"dropdown-item\" href=\"#\">Another action</a>\r\n                  <div class=\"dropdown-divider\"></div>\r\n                  <a class=\"dropdown-item\" href=\"#\">Something else here</a>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <!-- Card Body -->\r\n            <div class=\"card-body\">\r\n              <div class=\"chart-pie pt-4 pb-2\">\r\n                <canvas id=\"myPieChart\"></canvas>\r\n              </div>\r\n              <div class=\"mt-4 text-center small\">\r\n                <span class=\"mr-2\">\r\n                  <i class=\"fas fa-circle text-primary\"></i> Direct\r\n                </span>\r\n                <span class=\"mr-2\">\r\n                  <i class=\"fas fa-circle text-success\"></i> Social\r\n                </span>\r\n                <span class=\"mr-2\">\r\n                  <i class=\"fas fa-circle text-info\"></i> Referral\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n\r\n    </div>\r\n  </div>\r\n\r\n</template>\r\n\r\n<script>\r\nimport Chart from 'chart.js';\r\nimport apiClient from '@/services/ApiService';\r\n\r\nexport default {\r\n\r\n\r\n  data() {\r\n    return {\r\n      total_users: 0,\r\n      per_books_read: 0,\r\n      total_posts: 0,\r\n      books_per_month: [],\r\n\r\n    };\r\n  },\r\n\r\n  async mounted() {\r\n    // total_posts: '3', per_books_read: 66.66666666666666, total_users: '2'}\r\n    try {\r\n      const token = localStorage.getItem('authToken');\r\n      if (token) {\r\n        const response = await apiClient.get('/admin/dashboard', {\r\n          headers: { Authorization: `Bearer ${token}` }\r\n        });\r\n        console.log(response.data);\r\n        this.total_posts = response.data.total_posts;\r\n        this.per_books_read = Math.round(response.data.per_books_read * 100) / 100;\r\n        this.total_users = response.data.total_users;\r\n        this.books_per_month = response.data.posts_per_month;\r\n\r\n      }\r\n    } catch (error) {\r\n      console.error('Error:', error);\r\n    }\r\n\r\n\r\n    // Gráfico de líneas: Libros compartidos por mes (solo año actual)\r\n    const areaCtx = document.getElementById('myAreaChart');\r\n    if (areaCtx) {\r\n\r\n      // Etiquetas y datos\r\n      const labels = books_per_month.map(item => item.month.trim());\r\n      const data = books_per_month.map(item => parseInt(item.total, 10));\r\n\r\n      new Chart(areaCtx, {\r\n        type: 'line',\r\n        data: {\r\n          labels: labels,\r\n          datasets: [{\r\n            label: 'Libros compartidos',\r\n            data: data,\r\n            backgroundColor: 'rgba(54, 185, 204, 0.1)',\r\n            borderColor: '#36b9cc',\r\n            borderWidth: 2,\r\n            pointBackgroundColor: '#36b9cc'\r\n          }]\r\n        },\r\n        options: {\r\n          responsive: true,\r\n          title: {\r\n            display: true,\r\n            text: 'Libros compartidos por mes (Año actual)'\r\n          }\r\n        }\r\n      });\r\n    }\r\n\r\n    // Gráfico de pastel: Distribución de usuarios por actividad\r\n    const pieCtx = document.getElementById('myPieChart');\r\n    if (pieCtx) {\r\n      new Chart(pieCtx, {\r\n        type: 'pie',\r\n        data: {\r\n          labels: ['Solo comparten', 'Solo leen', 'Comparten y leen'],\r\n          datasets: [{\r\n            data: [25, 40, 35],\r\n            backgroundColor: ['#4e73df', '#1cc88a', '#f6c23e'],\r\n          }]\r\n        },\r\n        options: {\r\n          responsive: true,\r\n          title: {\r\n            display: true,\r\n            text: 'Distribución de usuarios por actividad'\r\n          }\r\n        }\r\n      });\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style type=\"text/css\" scoped>\r\n@keyframes chartjs-render-animation {\r\n  from {\r\n    opacity: .99\r\n  }\r\n\r\n  to {\r\n    opacity: 1\r\n  }\r\n}\r\n\r\n.chartjs-render-monitor {\r\n  animation: chartjs-render-animation 1ms\r\n}\r\n\r\n.chartjs-size-monitor,\r\n.chartjs-size-monitor-expand,\r\n.chartjs-size-monitor-shrink {\r\n  position: absolute;\r\n  direction: ltr;\r\n  left: 0;\r\n  top: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  overflow: hidden;\r\n  pointer-events: none;\r\n  visibility: hidden;\r\n  z-index: -1\r\n}\r\n\r\n.chartjs-size-monitor-expand>div {\r\n  position: absolute;\r\n  width: 1000000px;\r\n  height: 1000000px;\r\n  left: 0;\r\n  top: 0\r\n}\r\n\r\n.chartjs-size-monitor-shrink>div {\r\n  position: absolute;\r\n  width: 200%;\r\n  height: 200%;\r\n  left: 0;\r\n  top: 0\r\n}\r\n\r\n.chart-area {\r\n  position: relative;\r\n  width: 100%;\r\n  height: 100%;\r\n  padding: 0;\r\n  margin: 0 auto;\r\n}\r\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
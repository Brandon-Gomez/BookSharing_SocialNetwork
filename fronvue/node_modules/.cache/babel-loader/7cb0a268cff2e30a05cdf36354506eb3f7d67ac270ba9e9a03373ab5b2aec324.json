{"ast":null,"code":"import ApiService from \"@/services/ApiService\";\nexport default {\n  props: {\n    userId: {\n      type: String,\n      required: true\n    }\n  },\n  data() {\n    return {\n      isFollowing: false,\n      followerCount: 0,\n      followingCount: 0,\n      error: null\n    };\n  },\n  methods: {\n    async followUser() {\n      try {\n        const response = await ApiService.post(\"/follow\", {\n          followed_id: this.userId\n        });\n        this.isFollowing = true;\n        this.fetchFollowCounts();\n        console.log(response.message);\n      } catch (error) {\n        this.error = error.response?.data?.message || \"Error al seguir al usuario.\";\n      }\n    },\n    async unfollowUser() {\n      try {\n        const response = await ApiService.delete(\"/unfollow\", {\n          data: {\n            followed_id: this.userId\n          }\n        });\n        this.isFollowing = false;\n        this.fetchFollowCounts();\n        console.log(response.message);\n      } catch (error) {\n        this.error = error.response?.data?.message || \"Error al dejar de seguir al usuario.\";\n      }\n    },\n    async fetchFollowCounts() {\n      try {\n        const followerResponse = await ApiService.get(`/${this.userId}/followers/count`);\n        const followingResponse = await ApiService.get(`/${this.userId}/following/count`);\n        this.followerCount = followerResponse.followerCount;\n        this.followingCount = followingResponse.followingCount;\n      } catch (error) {\n        this.error = \"Error al obtener la información de seguimiento.\";\n      }\n    },\n    async checkIfFollowing() {\n      try {\n        const following = await ApiService.get(`/${this.userId}/following`);\n        this.isFollowing = following.some(user => user.id === this.$store.state.authUser.id);\n      } catch (error) {\n        this.error = \"Error al verificar el estado de seguimiento.\";\n      }\n    }\n  },\n  async mounted() {\n    await this.fetchFollowCounts();\n    await this.checkIfFollowing();\n  }\n};","map":{"version":3,"names":["ApiService","props","userId","type","String","required","data","isFollowing","followerCount","followingCount","error","methods","followUser","response","post","followed_id","fetchFollowCounts","console","log","message","unfollowUser","delete","followerResponse","get","followingResponse","checkIfFollowing","following","some","user","id","$store","state","authUser","mounted"],"sources":["C:\\DATA\\POW\\BookSharing_SocialNetwork\\fronvue\\src\\components\\follow_component.vue"],"sourcesContent":["<template>\r\n  <div class=\"follow-component\">\r\n    <div v-if=\"error\" class=\"error\">{{ error }}</div>\r\n    <div class=\"user-actions\">\r\n      <button v-if=\"!isFollowing\" @click=\"followUser\" class=\"btn btn-primary\">\r\n        Seguir\r\n      </button>\r\n      <button v-else @click=\"unfollowUser\" class=\"btn btn-secondary\">\r\n        Dejar de seguir\r\n      </button>\r\n    </div>\r\n\r\n    <div class=\"follow-info\">\r\n      <p><strong>Seguidores:</strong> {{ followerCount }}</p>\r\n      <p><strong>Seguidos:</strong> {{ followingCount }}</p>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport ApiService from \"@/services/ApiService\";\r\n\r\nexport default {\r\n  props: {\r\n    userId: {\r\n      type: String,\r\n      required: true,\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      isFollowing: false,\r\n      followerCount: 0,\r\n      followingCount: 0,\r\n      error: null,\r\n    };\r\n  },\r\n  methods: {\r\n    async followUser() {\r\n      try {\r\n        const response = await ApiService.post(\"/follow\", { followed_id: this.userId });\r\n        this.isFollowing = true;\r\n        this.fetchFollowCounts();\r\n        console.log(response.message);\r\n      } catch (error) {\r\n        this.error = error.response?.data?.message || \"Error al seguir al usuario.\";\r\n      }\r\n    },\r\n    async unfollowUser() {\r\n      try {\r\n        const response = await ApiService.delete(\"/unfollow\", { data: { followed_id: this.userId } });\r\n        this.isFollowing = false;\r\n        this.fetchFollowCounts();\r\n        console.log(response.message);\r\n      } catch (error) {\r\n        this.error = error.response?.data?.message || \"Error al dejar de seguir al usuario.\";\r\n      }\r\n    },\r\n    async fetchFollowCounts() {\r\n      try {\r\n        const followerResponse = await ApiService.get(`/${this.userId}/followers/count`);\r\n        const followingResponse = await ApiService.get(`/${this.userId}/following/count`);\r\n        this.followerCount = followerResponse.followerCount;\r\n        this.followingCount = followingResponse.followingCount;\r\n      } catch (error) {\r\n        this.error = \"Error al obtener la información de seguimiento.\";\r\n      }\r\n    },\r\n    async checkIfFollowing() {\r\n      try {\r\n        const following = await ApiService.get(`/${this.userId}/following`);\r\n        this.isFollowing = following.some((user) => user.id === this.$store.state.authUser.id);\r\n      } catch (error) {\r\n        this.error = \"Error al verificar el estado de seguimiento.\";\r\n      }\r\n    },\r\n  },\r\n  async mounted() {\r\n    await this.fetchFollowCounts();\r\n    await this.checkIfFollowing();\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.follow-component {\r\n  text-align: center;\r\n}\r\n.error {\r\n  color: red;\r\n  margin-bottom: 1rem;\r\n}\r\n.btn {\r\n  margin: 0.5rem;\r\n}\r\n</style>\r\n"],"mappings":"AAoBA,OAAOA,UAAS,MAAO,uBAAuB;AAE9C,eAAe;EACbC,KAAK,EAAE;IACLC,MAAM,EAAE;MACNC,IAAI,EAAEC,MAAM;MACZC,QAAQ,EAAE;IACZ;EACF,CAAC;EACDC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,WAAW,EAAE,KAAK;MAClBC,aAAa,EAAE,CAAC;MAChBC,cAAc,EAAE,CAAC;MACjBC,KAAK,EAAE;IACT,CAAC;EACH,CAAC;EACDC,OAAO,EAAE;IACP,MAAMC,UAAUA,CAAA,EAAG;MACjB,IAAI;QACF,MAAMC,QAAO,GAAI,MAAMb,UAAU,CAACc,IAAI,CAAC,SAAS,EAAE;UAAEC,WAAW,EAAE,IAAI,CAACb;QAAO,CAAC,CAAC;QAC/E,IAAI,CAACK,WAAU,GAAI,IAAI;QACvB,IAAI,CAACS,iBAAiB,CAAC,CAAC;QACxBC,OAAO,CAACC,GAAG,CAACL,QAAQ,CAACM,OAAO,CAAC;MAC/B,EAAE,OAAOT,KAAK,EAAE;QACd,IAAI,CAACA,KAAI,GAAIA,KAAK,CAACG,QAAQ,EAAEP,IAAI,EAAEa,OAAM,IAAK,6BAA6B;MAC7E;IACF,CAAC;IACD,MAAMC,YAAYA,CAAA,EAAG;MACnB,IAAI;QACF,MAAMP,QAAO,GAAI,MAAMb,UAAU,CAACqB,MAAM,CAAC,WAAW,EAAE;UAAEf,IAAI,EAAE;YAAES,WAAW,EAAE,IAAI,CAACb;UAAO;QAAE,CAAC,CAAC;QAC7F,IAAI,CAACK,WAAU,GAAI,KAAK;QACxB,IAAI,CAACS,iBAAiB,CAAC,CAAC;QACxBC,OAAO,CAACC,GAAG,CAACL,QAAQ,CAACM,OAAO,CAAC;MAC/B,EAAE,OAAOT,KAAK,EAAE;QACd,IAAI,CAACA,KAAI,GAAIA,KAAK,CAACG,QAAQ,EAAEP,IAAI,EAAEa,OAAM,IAAK,sCAAsC;MACtF;IACF,CAAC;IACD,MAAMH,iBAAiBA,CAAA,EAAG;MACxB,IAAI;QACF,MAAMM,gBAAe,GAAI,MAAMtB,UAAU,CAACuB,GAAG,CAAC,IAAI,IAAI,CAACrB,MAAM,kBAAkB,CAAC;QAChF,MAAMsB,iBAAgB,GAAI,MAAMxB,UAAU,CAACuB,GAAG,CAAC,IAAI,IAAI,CAACrB,MAAM,kBAAkB,CAAC;QACjF,IAAI,CAACM,aAAY,GAAIc,gBAAgB,CAACd,aAAa;QACnD,IAAI,CAACC,cAAa,GAAIe,iBAAiB,CAACf,cAAc;MACxD,EAAE,OAAOC,KAAK,EAAE;QACd,IAAI,CAACA,KAAI,GAAI,iDAAiD;MAChE;IACF,CAAC;IACD,MAAMe,gBAAgBA,CAAA,EAAG;MACvB,IAAI;QACF,MAAMC,SAAQ,GAAI,MAAM1B,UAAU,CAACuB,GAAG,CAAC,IAAI,IAAI,CAACrB,MAAM,YAAY,CAAC;QACnE,IAAI,CAACK,WAAU,GAAImB,SAAS,CAACC,IAAI,CAAEC,IAAI,IAAKA,IAAI,CAACC,EAAC,KAAM,IAAI,CAACC,MAAM,CAACC,KAAK,CAACC,QAAQ,CAACH,EAAE,CAAC;MACxF,EAAE,OAAOnB,KAAK,EAAE;QACd,IAAI,CAACA,KAAI,GAAI,8CAA8C;MAC7D;IACF;EACF,CAAC;EACD,MAAMuB,OAAOA,CAAA,EAAG;IACd,MAAM,IAAI,CAACjB,iBAAiB,CAAC,CAAC;IAC9B,MAAM,IAAI,CAACS,gBAAgB,CAAC,CAAC;EAC/B;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}